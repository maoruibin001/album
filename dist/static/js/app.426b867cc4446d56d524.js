webpackJsonp([1],{"+iUD":function(t,e){},0:function(t,e){},"2XCy":function(t,e){},"36oo":function(t,e){},"3SXx":function(t,e){},"3wn5":function(t,e){},"78s3":function(t,e){},"8Hz4":function(t,e){},BpHf:function(t,e){},BqfB:function(t,e){},GdEX:function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("woOf"),s=i.n(n),o=i("7+uW"),a=i("BO1k"),r=i.n(a),c=i("//Fk"),l=i.n(c);function d(){return!/Android | webOS |iPhone | iPod | BlackBerry/i.test(navigator.userAgent)}function u(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;return new l.a(function(s,o){var a=new Image;if(a.src=t,a.width>0||a.height>0){var r=(e-i)*(a.height/a.width)+n;return s(r)}var c=setInterval(function(){if(a.width>0||a.height>0){var t=(e-i)*(a.height/a.width)+n;return clearInterval(c),s(t)}},30)})}function h(t,e){e=isNaN(e)?3e3:e;var i=document.createElement("div");i.innerHTML=t,i.style.cssText="max-width:60%;min-width: 150px;padding:0 14px;height: 40px;color: rgb(255, 255, 255);line-height: 40px;text-align: center;border-radius: 4px;position: fixed;top: 50%;left: 50%;transform: translate(-50%, -50%);z-index: 999999;background: rgba(0, 0, 0,.7);font-size: 16px;",document.body.appendChild(i),setTimeout(function(){i.style.webkitTransition="-webkit-transform 0.5s ease-in, opacity 0.5s ease-in",i.style.opacity="0",setTimeout(function(){document.body.removeChild(i)},500)},e)}var f={data:function(){return{isPc:d(),navList:[{id:1,text:"首页",isActive:!0,iconClass:"iconzu3",path:"/",params:{}},{id:2,text:"分类",isActive:!1,iconClass:"iconzu2",path:"/classify",params:{},children:[{id:5,text:"小类",isActive:!1,iconClass:"iconzu2",path:"/littleClass",params:{}}]},{id:3,text:"通知",isActive:!1,iconClass:"iconzu1",path:"/notice",params:{}},{id:4,text:"收藏",isActive:!1,iconClass:"iconzu4",path:"/collect",params:{}}]}},created:function(){var t=this.$route.path,e=null;if(t){var i=!0,n=!1,s=void 0;try{for(var o,a=r()(this.navList);!(i=(o=a.next()).done);i=!0){var c=o.value;if(c.path===t){e=c;break}if(c.children){var l=!0,d=!1,u=void 0;try{for(var h,f=r()(c.children);!(l=(h=f.next()).done);l=!0){var m=h.value;if(-1!==t.indexOf(m.path)){e=c;break}}}catch(t){d=!0,u=t}finally{try{!l&&f.return&&f.return()}finally{if(d)throw u}}}}}catch(t){n=!0,s=t}finally{try{!i&&a.return&&a.return()}finally{if(n)throw s}}e&&this.chooseItem(e,!0)}},methods:{chooseItem:function(t,e){t&&(this.navList.forEach(function(e){e.isActive=e.id===t.id}),e||this.$router.push(t.path))}}},m={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ul",{class:t.isPc?"pc-nav-bar":"nav-bar"},t._l(t.navList,function(e,n){return i("li",{key:n,class:t.isPc?"pc-bar-item":"bar-item",on:{click:function(i){return t.chooseItem(e)}}},[i("div",{class:{"pc-item-box":t.isPc,active:e.isActive}},[i("div",{staticClass:"icon iconfont",class:e.iconClass}),t._v(" "),i("div",{staticClass:"text"},[t._v(t._s(e.text))])])])}),0)},staticRenderFns:[]};var p=i("VU/8")(f,m,!1,function(t){i("bZhl")},"data-v-10804436",null).exports,v=i("Dd8w"),g=i.n(v),I=i("NYxO");function w(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1],i=t.method,n=t.type,s=void 0===n?"post":n,a=i.indexOf(":");if(-1!==a){var r=i.slice(a+1);i=i.slice(0,a)+e[r]}return"post"===s||"put"===s?o.a.http[s](i,e).then(function(t){if(0===t.retCode)return t;if(void 0!==t.retCode)throw new Error(t);return t}):o.a.http[s](i,{params:e}).then(function(t){if(0===t.retCode)return t;if(void 0!==t.retCode)throw new Error(t);return t})}var C={add:{method:"/api/bseries"},move:{method:"/api/bseries/move"},delete:{method:"/api/bseries/:bId",type:"delete"},edit:{method:"/api/bseries/:bId",type:"put"},getAll:{method:"/api/bserieses",type:"get"},getSome:{method:"/api/someBserieses",type:"get"},get:{method:"/api/bseries/:bId",type:"get"}},b={add:{method:"/api/lseries"},move:{method:"/api/lseries/move"},delete:{method:"/api/lseries/:lId",type:"delete"},edit:{method:"/api/lseries/:lId",type:"put"},getSome:{method:"/api/someLserieses",type:"get"},getAll:{method:"/api/lserieses",type:"get"},get:{method:"/api/lseries/:lId",type:"get"}},y={add:{method:"/api/product"},move:{method:"/api/product/move"},delete:{method:"/api/product/:id",type:"delete"},edit:{method:"/api/product/:id",type:"put"},getSome:{method:"/api/someProducts",type:"get"},getAll:{method:"/api/products",type:"get"},get:{method:"/api/product/:id",type:"get"}},_={uploadImg:{method:"/api/upload/image"},uploadFile:{method:"/api/upload/file"}},x={PAGESIZE:2,PAGENO:1,HOST:"http://"+location.host};function E(t,e,i){var n=i||{},s=n.pageNo,o=void 0===s?x.PAGENO:s,a=n.pageSize,r=void 0===a?x.PAGESIZE:a;t("setIsEnd",!!e.isEnd),t("setPageNo",o),t("setPageSize",r),t("setIsLoading",!1)}o.a.use(I.a);var L=new I.a.Store({state:{pageNo:1,pageSize:x.PAGESIZE,isEnd:!1,isLoading:!1,bseriesList:[],bseriesInfo:{},lseriesList:[],lseriesInfo:{},productList:[],productInfo:{},editDiologShow:!1,bEditDiologShow:!1,lEditDiologShow:!1,isEdit:!1,isBEdit:!1,isLEdit:!1,editInfo:{name:"",mainImgList:[],descImgThumb:"",descImg:"",gifImgThumb:"",gifImg:"",originFile:"",prize:0},bEditInfo:{name:""},lEditInfo:{name:"",mainImg:"",mainImgThumb:"",bId:0}},mutations:{setEditing:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.isEdit=e},setBEditing:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.isBEdit=e},setLEditing:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.isLEdit=e},setProductList:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];t.productList=e},setProductInfo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.productInfo=e},setEditInfo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.editInfo=e},setBEditInfo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.bEditInfo=e},setLEditInfo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.lEditInfo=e},setEditDiologShow:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.editDiologShow=e},setBEditDiologShow:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.bEditDiologShow=e},setLEditDiologShow:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.lEditDiologShow=e},setBseriesList:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];t.bseriesList=e},setLseriesList:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];t.lseriesList=e},setBseriesInfo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.bseriesInfo=e},setLseriesInfo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.lseriesInfo=e},setPageNo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;t.pageNo=e},setPageSize:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;t.pageSize=e},setIsEnd:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.isEnd=e},setIsLoading:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.isLoading=e}},actions:{deleteProduct:function(t,e){t.commit;var i=t.dispatch;return w(y.delete,e).then(function(t){i("getProducts",e),h("删除产品成功")}).catch(function(t){h(t.msg||t.body.msg)})},addProduct:function(t,e){t.commit;var i=t.dispatch;return w(y.add,e).then(function(t){var e=t.data;i("getProducts",e),h("新增产品成功")}).catch(function(t){h(t.msg||t.body.msg)})},moveProduct:function(t,e){t.commit;var i=t.dispatch;return w(y.move,e).then(function(t){i("getProducts",e),h("移动产品成功")}).catch(function(t){h(t.msg||t.body.msg)})},editProduct:function(t,e){t.commit;var i=t.dispatch;return w(y.edit,e).then(function(t){var e=t.data;i("getProducts",e),h("修改产品成功")}).catch(function(t){h(t.msg||t.body.msg)})},getSomeProducts:function(t,e){var i=t.commit;t.dispatch;return w(y.getSome,e).then(function(t){var n=t.data;i("setProductList",n.products),E(i,n,e)}).catch(function(t){h(t.msg||t.body.msg)})},getProducts:function(t,e){var i=t.commit;t.dispatch;return e=function(t,e){var i=e||{},n=i.pageNo,s=void 0===n?x.PAGENO:n,o=i.pageSize,a=void 0===o?x.PAGESIZE:o;return g()({},e,{pageNo:s,pageSize:a})}(),console.log("params:",e),w(y.getAll,e).then(function(t){var n=t.data;i("setProductList",n.products),E(i,n,e)}).catch(function(t){h(t.msg||t.body.msg)})},getProduct:function(t,e){var i=t.commit;t.dispatch;return w(y.get,e).then(function(t){var n=t.data;i("setProductInfo",n),E(i,n,e)}).catch(function(t){h(t.msg||t.body.msg)})},deleteBseries:function(t,e){t.commit;var i=t.dispatch;return w(C.delete,e).then(function(t){i("getBserieses"),i("getProducts"),h("删除大类成功")}).catch(function(t){h(t.msg||t.body.msg)})},addBseries:function(t,e){t.commit;var i=t.dispatch;return w(C.add,e).then(function(t){i("getBserieses"),h("新增大系列成功")}).catch(function(t){h(t.msg||t.body.msg)})},moveBseries:function(t,e){t.commit;var i=t.dispatch;return w(C.move,e).then(function(t){i("getBserieses"),h("移动大系列成功")}).catch(function(t){h(t.msg||t.body.msg)})},editBseries:function(t,e){t.commit;var i=t.dispatch;return w(C.edit,e).then(function(t){i("getBserieses"),h("修改大系列成功")}).catch(function(t){h(t.msg||t.body.msg)})},getBserieses:function(t,e){var i=t.commit;t.dispatch;return w(C.getAll,e).then(function(t){var n=t.data;i("setBseriesList",n.bseries),E(i,n,e)}).catch(function(t){h(t.msg||t.body.msg)})},getSomeBserieses:function(t,e){var i=t.commit;t.dispatch;return w(C.getSome,e).then(function(t){var n=t.data;i("setBseriesList",n.bseries),E(i,n,e)}).catch(function(t){h(t.msg||t.body.msg)})},getBseries:function(t,e){var i=t.commit;t.dispatch;return w(C.get,e).then(function(t){var n=t.data;i("setBseriesInfo",n),E(i,n,e)}).catch(function(t){h(t.msg||t.body.msg)})},deleteLseries:function(t,e){t.commit;var i=t.dispatch;return w(b.delete,e).then(function(t){i("getBserieses"),i("getProducts",e),h("删除小类成功")}).catch(function(t){h(t.msg||t.body.msg)})},addLseries:function(t,e){t.commit;var i=t.dispatch;return w(b.add,e).then(function(t){i("getBserieses"),h("新增小系列成功")}).catch(function(t){h(t.msg||t.body.msg)})},moveLseries:function(t,e){t.commit;var i=t.dispatch;return w(b.move,e).then(function(t){i("getBserieses"),h("移动小系列成功")}).catch(function(t){h(t.msg||t.body.msg)})},editLseries:function(t,e){t.commit;var i=t.dispatch;return w(b.edit,e).then(function(t){i("getBserieses"),h("修改小系列成功")}).catch(function(t){h(t.msg||t.body.msg)})},getLserieses:function(t,e){var i=t.commit;t.dispatch;return w(b.getAll,e).then(function(t){var n=t.data;i("setLseriesList",n.lseries),E(i,n,e)}).catch(function(t){h(t.msg||t.body.msg)})},getLseries:function(t,e){var i=t.commit;t.dispatch;return w(b.get,e).then(function(t){var n=t.data;i("setLseriesInfo",n),E(i,n,e)}).catch(function(t){h(t.msg||t.body.msg)})}}}),S={data:function(){return{isPc:d(),searchText:""}},computed:{needGap:function(){return-1!==["/","/notice","/home","/collect","/classify"].indexOf(this.$route.path)},homeItems:function(){return L.state.productList.map(function(t){return g()({},t,{width:130,height:140})})}},methods:{toUser:function(){this.$router.push("/user")},search:function(t){switch(this.$route.path){case"/classify":L.dispatch("getSomeBserieses",{key:t});break;case"/":case"/collect":case"/notice":L.dispatch("getSomeProducts",{key:t})}console.log()}}},k={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"search-bar",class:{"top-gap":t.needGap,"left-gap":t.isPc}},[i("div",{staticClass:"search-container"},[i("div",{staticClass:"search-box"},[i("span",{staticClass:"search-icon iconfont iconzu7"}),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],staticClass:"search-input",attrs:{type:"text",placeholder:"查找"},domProps:{value:t.searchText},on:{change:function(e){return t.search(t.searchText)},input:function(e){e.target.composing||(t.searchText=e.target.value)}}})]),t._v(" "),i("div",{staticClass:"person-box",on:{click:function(e){return t.toUser()}}},[i("div",{staticClass:"person-icon iconfont iconfuhao"})])])])},staticRenderFns:[]};var B={name:"App",components:{Navbar:p,Search:i("VU/8")(S,k,!1,function(t){i("nDQ0")},"data-v-f4077eb8",null).exports},computed:{showNavbar:function(){return-1!==["/","/notice","/home","/collect","/classify"].indexOf(this.$route.path)||-1!==this.$route.path.indexOf("/littleClass")},needGap:function(){return-1!==["/","/notice","/home","/collect","/classify"].indexOf(this.$route.path)},notNeedGap:function(){return-1!==this.$route.path.indexOf("/admin")||-1!==this.$route.path.indexOf("/detail")}},data:function(){return{isPc:d()}}},P={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:{"left-gap":t.isPc&&!t.notNeedGap},attrs:{id:"app"}},[t.showNavbar?i("Search"):t._e(),t._v(" "),i("router-view",{class:{"top-gap":!t.notNeedGap,"bottom-gap":!t.notNeedGap}}),t._v(" "),t.showNavbar?i("Navbar"):t._e()],1)},staticRenderFns:[]};var $=i("VU/8")(B,P,!1,function(t){i("xFEl")},null,null).exports,D=i("/ocq"),T="_wfMoveClass",F={props:{autoResize:{default:!0},interval:{default:200,validator:function(t){return t>=0}},align:{default:"left",validator:function(t){return~["left","right","center"].indexOf(t)}},line:{default:"v",validator:function(t){return~["v","h"].indexOf(t)}},lineGap:{required:!0,validator:function(t){return t>=0}},minLineGap:{validator:function(t){return t>=0}},maxLineGap:{validator:function(t){return t>=0}},singleMaxWidth:{validator:function(t){return t>=0}},fixedHeight:{default:!1},grow:{validator:function(t){return t instanceof Array}},watch:{default:function(){return{}}}},data:function(){return{style:{height:"",overflow:""},token:null}},methods:{reflowHandler:function(){clearTimeout(this.token),this.token=setTimeout(this.reflow,this.interval)},autoResizeHandler:function(t){!1!==t&&this.autoResize?W(window,"resize",this.reflowHandler,!1):V(window,"resize",this.reflowHandler,!1)},reflow:function(){var t=this;if(!this.$el)return;var e=this.$el.clientWidth,i=this.$children.map(function(t){return t.getMeta()});i.sort(function(t,e){return t.order-e.order}),this.virtualRects=i.map(function(){return{}}),G(this,i,this.virtualRects),setTimeout(function(){var n;n=t.$el,e!==n.clientWidth&&G(t,i,t.virtualRects),t.style.overflow="hidden",function(t,e){var i=e.filter(function(t){return t.moveClass}),n=R(i);!function(t,e){t.forEach(function(t,i){var n=e[i].node.style;for(var s in e[i].vm.rect=t,t)n[s]=t[s]+"px"})}(t,e);var s=R(i);i.forEach(function(t,e){var i,o,a,r,c,l,d;t.node[T]=t.moveClass,i=t.node,o=n[e],a=s[e],r=o.left-a.left,c=o.top-a.top,l=o.width/a.width,d=o.height/a.height,i.style.transform=i.style.WebkitTransform="translate("+r+"px,"+c+"px) scale("+l+","+d+")",i.style.transitionDuration="0s"}),document.body.clientWidth,i.forEach(function(t){var e;!function(t,e){if(!function(t,e){return new RegExp("\\b"+e+"\\b").test(A(t,"class"))}(t,e)){var i=A(t,"class").trim(),n=(i+" "+e).trim();A(t,"class",n)}}(t.node,t.moveClass),(e=t.node).style.transform=e.style.WebkitTransform="",e.style.transitionDuration=""})}(t.virtualRects,i),t.$emit("reflowed",t)},0)}},created:function(){var t=this;this.virtualRects=[],this.$on("reflow",function(){t.reflowHandler()}),this.$watch(function(){return t.align,t.line,t.lineGap,t.minLineGap,t.maxLineGap,t.singleMaxWidth,t.fixedHeight,t.watch},this.reflowHandler),this.$watch("grow",this.reflowHandler)},mounted:function(){this.$watch("autoResize",this.autoResizeHandler),W(this.$el,H(),O,!0),this.autoResizeHandler(this.autoResize)},beforeDestroy:function(){this.autoResizeHandler(!1),V(this.$el,H(),O,!0)}};function O(t){var e,i,n,s=t.target,o=s[T];o&&(e=s,i=new RegExp("\\s*\\b"+o+"\\b\\s*","g"),n=A(e,"class").replace(i," ").trim(),A(e,"class",n))}function G(t,e,i){var n=function(t){var e=t.maxLineGap?+t.maxLineGap:t.lineGap;return{align:~["left","right","center"].indexOf(t.align)?t.align:"left",line:~["v","h"].indexOf(t.line)?t.line:"v",lineGap:+t.lineGap,minLineGap:t.minLineGap?+t.minLineGap:t.lineGap,maxLineGap:e,singleMaxWidth:Math.max(t.singleMaxWidth||0,e),fixedHeight:!!t.fixedHeight,grow:t.grow&&t.grow.map(function(t){return+t})}}(t);("h"===t.line?z:N).calculate(t,n,e,i)}var N=function(){return{calculate:function(t,e,i,n){var s=t.$el.clientWidth,o=e.grow,a=o?function(t,e){var i=j(e);return{width:e.map(function(e){return t*e/i}),count:e.length,left:0}}(s,o):function(t,e){var i=t/e.lineGap,n=void 0;if(e.singleMaxWidth>=t)i=1,n=Math.max(t,e.minLineGap);else{var s=e.maxLineGap*~~i,o=e.minLineGap*~~(i+1),a=s>=t,r=o<=t;a&&r?(i=Math.round(i),n=t/i):a?n=t/(i=~~i):r?n=t/(i=~~(i+1)):(i=~~i,n=e.maxLineGap),1===i&&(n=Math.min(t,e.singleMaxWidth),n=Math.max(n,e.minLineGap))}return{width:M(n,i),count:i,left:U(t,n*i,e.align)}}(s,e),r=M(0,a.count);i.forEach(function(t,i){var s=r.reduce(function(t,e,i){return e<r[t]?i:t},0),o=a.width[s%a.count],c=n[i];c.top=r[s],c.left=a.left+(s?j(a.width.slice(0,s)):0),c.width=o,c.height=t.height*(e.fixedHeight?1:o/t.width),r[s]=r[s]+c.height}),t.style.height=Math.max.apply(Math,r)+"px"}}}(),z=function(){function t(t,i,n,s){var o=function(t,e,i,n){for(var s=0,o=n,a=0;o<i.length&&a<=t;o++)a+=i[o].width*e/i[o].height,s++;return s}(t,i.lineGap,n,s),a=Math.max(o-1,1),r=e(t,i,n,s,o),c=function(t,e,i){return t.cost===1/0&&e.cost===1/0?e.width<i?e:t:e.cost>=t.cost?t:e}(e(t,i,n,s,a),r,t),l=c.height,d=c.width;return 1===c.count&&(d=Math.min(i.singleMaxWidth,t),l=n[s].height*d/n[s].width),{left:U(t,d,i.align),count:c.count,height:l}}function e(t,e,i,n,s){for(var o=0,a=s-1;a>=0;a--){var r=i[n+a];o+=r.width*e.lineGap/r.height}var c=e.lineGap*t/o;if(c<=e.maxLineGap&&c>=e.minLineGap)return{cost:Math.abs(e.lineGap-c),count:s,width:t,height:c};var l=o>t?e.minLineGap:e.maxLineGap;return{cost:1/0,count:s,width:o*l/e.lineGap,height:l}}return{calculate:function(e,i,n,s){for(var o=e.$el.clientWidth,a=n.length,r=0,c=0;c<a;){for(var l,d,u=t(o,i,n,c),h=0,f=0;h<u.count;h++)l=n[c+h],(d=s[c+h]).top=r,d.left=u.left+f,d.width=l.width*u.height/l.height,d.height=u.height,f+=d.width;c+=u.count,r+=u.height}e.style.height=r+"px"}}}();function U(t,e,i){switch(i){case"right":return t-e;case"center":return(t-e)/2;default:return 0}}function j(t){return t.reduce(function(t,e){return t+e})}function R(t){return t.map(function(t){return t.vm.rect})}function H(){return void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend?"webkitTransitionEnd":"transitionend"}function M(t,e){for(var i="function"==typeof t?function(){return t()}:function(){return t},n=[],s=0;s<e;s++)n[s]=i();return n}function A(t,e,i){if(void 0===i)return t.getAttribute(e)||"";t.setAttribute(e,i)}function W(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];t.addEventListener(e,i,n)}function V(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];t.removeEventListener(e,i,n)}var q={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"vue-waterfall",style:this.style},[this._t("default")],2)},staticRenderFns:[]};var X=i("VU/8")(F,q,!1,function(t){i("merk")},null,null).exports,Z={props:{items:{type:Array,default:function(){return[]}}},components:{Waterfall:X},mounted:function(){d()&&window.addEventListener("scroll",this.scrollHandler)},beforeDestroy:function(){d()&&window.addEventListener("scroll",this.scrollHandler)},data:function(){return{align:"center",isBusy:!1}},methods:{scrollHandler:function(){(document.documentElement.scrollTop||document.body.scrollTop)+window.innerHeight>=document.body.clientHeight&&this.addItems()},addItems:function(){this.isBusy||(this.isBusy=!0,this.$emit("loadmore"))},reflowed:function(){this.isBusy=!1,this.$emit("reflowed")}}},Y={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("waterfall",{ref:"waterfall",attrs:{align:t.align,"line-gap":200,"min-line-gap":100,"max-line-gap":220,"single-max-width":300,watch:t.items},on:{reflowed:t.reflowed},nativeOn:{scroll:function(e){return t.scrollfall(e)}}},[t._t("default")],2)},staticRenderFns:[]};var Q=i("VU/8")(Z,Y,!1,function(t){i("yRND")},"data-v-6e120c36",null).exports,J=i("/kJX"),K={props:["item","data","id"],components:{Carousel:J.Carousel,Slide:J.Slide},data:function(){return{zIndex:1,maxHeight:0,maxHeightItem:{},items:this.item.map(function(t){return g()({},t,{style:{width:"100%",height:"auto"}})}),index:this.item.length}},methods:{reHeight:function(){},getImgSize:function(t,e){var i=this;u(t.thumbUrl,130,0,15).then(function(n){0===e&&(t.height=n,i.$emit("itemChange",g()({},t,{id:i.id})))})}},mounted:function(){var t=this;setTimeout(function(){t.zIndex=2},300),setTimeout(function(){t.zIndex=3},500),setTimeout(function(){t.zIndex=4},1e3)}},tt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("carousel",{attrs:{mouseDrag:!1,autoplay:!0,loop:!0,perPage:1,autoplayTimeout:5e3,paginationEnabled:!1,adjustableHeight:!0}},t._l(t.items,function(e,n){return i("slide",{key:n,style:{zIndex:t.zIndex}},[i("img",{staticStyle:{"border-radus":"5px"},style:e.style,attrs:{id:"pic"+e.Id,src:e.thumbUrl,alt:""},on:{load:function(i){return t.getImgSize(e,n)}}})])}),1)},staticRenderFns:[]},et=i("VU/8")(K,tt,!1,null,null,null).exports,it={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{directives:[{name:"show",rawName:"v-show",value:this.isShow,expression:"isShow"}],staticClass:"vue-waterfall-slot"},[this._t("default")],2)},staticRenderFns:[]};var nt=i("VU/8")({data:function(){return{isShow:!1}},props:{width:{required:!0,validator:function(t){return t>=0}},height:{required:!0,validator:function(t){return t>=0}},order:{default:0},moveClass:{default:""}},methods:{notify:function(){this.$parent.$emit("reflow",this)},getMeta:function(){return{vm:this,node:this.$el,order:this.order,width:this.width,height:this.height,moveClass:this.moveClass}}},created:function(){var t=this;this.rect={top:0,left:0,width:0,height:0},this.$watch(function(){return t.width,t.height},this.notify)},mounted:function(){var t=this;this.$parent.$once("reflowed",function(){t.isShow=!0}),this.notify()},destroyed:function(){this.notify()}},it,!1,function(t){i("2XCy")},null,null).exports,st={components:{WaterFall:Q,WaterfallSlot:nt,Carousel:et},created:function(){L.dispatch("getProducts")},computed:{list:function(){return L.state.productList.map(function(t){return g()({},t,{width:130,height:140})})},isEnd:function(){return L.state.isEnd},pageNo:function(){return L.state.pageNo},isLoading:function(){return L.state.isLoading}},watch:{list:function(t){this.items=t}},data:function(){return{items:this.list}},methods:{itemChange:function(t){this.items.forEach(function(e){e.id===t.id&&(e.height=t.height)})},toDetail:function(t){t.id&&this.$router.push("/detail/"+t.id)},refresh:function(t){(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,i=new l.a(function(t,i){setTimeout(function(){t()},e)});return l.a.all([t,i]).then(function(t){return t[0]})})(L.dispatch("getBserieses")).then(function(){t()}).catch(function(e){t()})},loadmore:function(t){console.log("loadmore"),this.isEnd||this.isLoading?t():(console.log("loading"),L.commit("setIsLoading",!0),L.dispatch("getProducts",{pageNo:this.pageNo+1}).then(function(){t()}).catch(function(){t()}))}}},ot={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("scroller",{attrs:{refreshText:"刷新中...","on-refresh":t.refresh,height:"95%"}},[i("div",{staticStyle:{padding:"0 10px"}},[i("WaterFall",{staticClass:"item-box",on:{loadmore:t.loadmore}},t._l(t.items,function(e,n){return i("waterfall-slot",{key:e.index,attrs:{width:e.width,height:e.height,order:n,"move-class":"item-move"}},[e.mainImgList&&e.mainImgList.length>0?i("div",{staticClass:"item",on:{click:function(i){return t.toDetail(e)}}},[i("Carousel",{attrs:{item:e.mainImgList||[],id:e.id},on:{itemChange:t.itemChange}})],1):t._e(),t._v(" "),i("div",{staticClass:"item-desc"},[i("div",{staticClass:"left"},[t._v("\n                        "+t._s(e.name)+"\n                    ")]),t._v(" "),i("div",{staticClass:"right"},[t._v("\n                        ... \n                    ")])])])}),1)],1)])},staticRenderFns:[]};var at=i("VU/8")(st,ot,!1,function(t){i("klj4")},"data-v-678aa71a",null).exports,rt={components:{WaterFall:Q,WaterfallSlot:nt},created:function(){L.dispatch("getBserieses")},computed:{items:function(){var t=L.state.bseriesList.map(function(t){return g()({},t,{width:130,height:120})});return t},isEnd:function(){return L.state.isEnd},pageNo:function(){return L.state.pageNo}},data:function(){return{}},methods:{getCurrentHeight:function(t){},toLittleClass:function(t){this.$router.push("/"+t.bId+"/littleClass")},reflowed:function(){},refresh:function(t){L.dispatch("getProducts",{pId:-1}).then(function(){t()}).catch(function(){t()})},loadmore:function(t){this.isEnd||L.dispatch("getProducts",{pageNo:this.pageNo+1,pId:-1}).then(function(){t()}).catch(function(){t()})},stateChange:function(t){"pull"===t||"trigger"===t?this.iconLink="#icon-arrow-bottom":"loading"===t?this.iconLink="#icon-loading":"loaded-done"===t&&(this.iconLink="#icon-finish")}}},ct={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("scroller",{attrs:{refreshText:"刷新中...","on-refresh":t.refresh}},[i("div",{staticStyle:{padding:"0 10px"}},[i("WaterFall",{staticClass:"box",attrs:{"fixed-height":!0,line:"v",height:"95%"},on:{loadmore:t.loadmore,reflowed:t.reflowed}},t._l(t.items,function(e,n){return i("waterfall-slot",{key:e.index,staticClass:"slot-item",attrs:{width:e.width,height:e.height,order:n,"move-class":"item-move"}},[i("div",{staticClass:"item",on:{click:function(i){return t.toLittleClass(e)}}},[i("div",{staticClass:"title"},[t._v(t._s(e.name))]),t._v(" "),i("div",{staticClass:"img-box"},[i("div",{staticClass:"left",style:{"background-image":"url("+e.children[0].mainImgThumb+")"}}),t._v(" "),i("div",{staticClass:"right"},[i("div",{staticClass:"r-item top",style:{"background-image":"url("+(e.children[1]||e.children[0]).mainImgThumb+")"}}),t._v(" "),i("div",{staticClass:"r-item bottom",style:{"background-image":"url("+(e.children[2]||e.children[1]||e.children[0]).mainImgThumb+")"}})])])])])}),1)],1)])},staticRenderFns:[]};var lt=i("VU/8")(rt,ct,!1,function(t){i("nCzU")},"data-v-31ad2bc8",null).exports,dt=["#252B18","#4A3901","#40481F","#8B7450","#647C02"],ut={props:{list:{type:Array,default:function(){return[]}}},data:function(){return{sliderList:this.handlerList(this.list)}},watch:{list:function(t){this.sliderList=this.handlerList(this.list)}},methods:{handlerList:function(t){return[{lId:0,name:"全部",color:dt[0],isActive:!0}].concat(t.map(function(t,e){return g()({},t,{color:dt[e]||dt[e%dt.length],isActive:!1})}))},chooseItem:function(t,e){e.forEach(function(e){e.isActive=e.lId===t.lId}),this.$emit("chooseItem",t)}}},ht={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"slider-container"},[i("ul",{staticClass:"slider-box"},t._l(t.sliderList,function(e,n){return i("li",{key:n,staticClass:"slider-item",class:{active:e.isActive},style:{backgroundColor:e.color},on:{click:function(i){return t.chooseItem(e,t.sliderList)}}},[t._v(t._s(e.name))])}),0)])},staticRenderFns:[]};var ft={components:{WaterFall:Q,WaterfallSlot:nt,Slider:i("VU/8")(ut,ht,!1,function(t){i("3wn5")},"data-v-3db9a2ce",null).exports},data:function(){return{id:this.$route.params.id,items:[],itemWidth:0}},computed:{navList:function(){var t=L.state.bseriesInfo||{};return console.log("info",t),t.children},list:function(){return L.state.productList||[]},isEnd:function(){return L.state.isEnd},pageNo:function(){return L.state.pageNo},pageSize:function(){return L.state.pageSize}},created:function(){L.dispatch("getBseries",{bId:this.id}),L.dispatch("getProducts",{bId:this.id})},watch:{list:function(t){this.items=this.handlerList(t)}},methods:{toDetail:function(t){t.id&&this.$router.push("/detail/"+t.id)},handlerList:function(t){return t.map(function(t){return g()({},t,{width:130,height:140})})},chooseItem:function(t){"全部"===t.name?L.dispatch("getProducts",{bId:this.id}):(L.commit("setPageNo",1),L.dispatch("getProducts",{lId:t.lId}))},getCurrentHeight:function(t){t.mainImgList=t.mainImgList||[{}],u((t.mainImgList[0]||{}).url,t.width).then(function(e){t.height=e})},reflowed:function(){},refresh:function(t){setTimeout(function(){t()},2500)},loadmore:function(t){t()}}},mt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[i("Slider",{attrs:{list:t.navList},on:{chooseItem:t.chooseItem}}),t._v(" "),i("scroller",{staticClass:"scrollerbox",attrs:{refreshText:"刷新中...","on-refresh":t.refresh,height:"95%","on-infinite":t.loadmore}},[i("WaterFall",{staticClass:"item-box",on:{loadmore:t.loadmore,reflowed:t.reflowed}},t._l(t.items,function(e,n){return i("waterfall-slot",{key:e.index,staticClass:"slot-item",attrs:{width:e.width,height:e.height,order:n,"move-class":"item-move"}},[i("div",{staticClass:"item",on:{click:function(i){return t.toDetail(e)}}},[i("img",{ref:e.id,refInFor:!0,staticStyle:{width:"100%"},attrs:{src:e.mainImgList[0].thumbUrl,alt:""},on:{load:function(i){return t.getCurrentHeight(e)}}}),t._v(" "),i("div",{staticClass:"item-desc"},[i("div",{staticClass:"left"},[t._v("\n                            "+t._s(e.name)+"\n                        ")]),t._v(" "),i("div",{staticClass:"right"},[t._v("\n                            ... \n                        ")])])])])}),1)],1)],1)},staticRenderFns:[]};var pt=i("VU/8")(ft,mt,!1,function(t){i("qk1l")},"data-v-2e70cd06",null).exports,vt={components:{WaterFall:Q,WaterfallSlot:nt},data:function(){return{items:[]}},computed:{list:function(){return L.state.productList.map(function(t){return g()({},t,{width:130,height:140})})},isEnd:function(){return L.state.isEnd},pageNo:function(){return L.state.pageNo}},watch:{list:function(t){this.items=t}},created:function(){L.dispatch("getProducts",{collect:1})},methods:{toDetail:function(t){t.id&&this.$router.push("/detail/"+t.id)},getCurrentHeight:function(t){u((t.mainImgList[0]||{}).url,t.width).then(function(e){t.height=e})},reflowed:function(){},refresh:function(t){setTimeout(function(){t()},1500)},loadmore:function(t){t(),"function"!=typeof t&&(t=function(){})}}},gt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("scroller",{attrs:{refreshText:"刷新中...","on-refresh":t.refresh,height:"95%","on-infinite":t.loadmore}},[i("WaterFall",{staticClass:"item-box",on:{loadmore:t.loadmore,reflowed:t.reflowed}},t._l(t.items,function(e,n){return i("waterfall-slot",{key:e.index,staticClass:"slot-item",attrs:{width:e.width,height:e.height,order:n,"move-class":"item-move"}},[i("div",{staticClass:"item",on:{click:function(i){return t.toDetail(e)}}},[i("img",{ref:e.id,refInFor:!0,staticStyle:{width:"100%"},attrs:{src:e.mainImgList[0].url,alt:""},on:{load:function(i){return t.getCurrentHeight(e)}}}),t._v(" "),i("div",{staticClass:"item-desc"},[i("div",{staticClass:"left"},[t._v("\n                        "+t._s(e.name)+"\n                    ")]),t._v(" "),i("div",{staticClass:"right"},[t._v("\n                        ... \n                    ")])])])])}),1)],1)},staticRenderFns:[]};var It=i("VU/8")(vt,gt,!1,function(t){i("+iUD")},"data-v-5ecc1f57",null).exports;var wt={components:{},data:function(){return{}},computed:{items:function(){var t=L.state.productList.map(function(t){return g()({},t,{width:130,height:140})});return t},isEnd:function(){return L.state.isEnd},pageNo:function(){return L.state.pageNo}},created:function(){L.dispatch("getProducts",{})},filters:{getGapDay:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date;if(!t||!e)throw new Error("请传入有效日期");var i=new Date(t).setHours(0,0,0,0),n=new Date(e).setHours(0,0,0,0),s=parseInt((i-n)/864e5);if(0===s){var o=parseInt((new Date(t).getTime()-new Date(e).getTime())/36e5);return o>0?o+"小时后":0===o?"刚刚":-o+"小时前"}return s>0?s+"天后":-s+"天前"}},methods:{toDetail:function(t){t.id&&this.$router.push("/detail/"+t.id)},refresh:function(t){setTimeout(function(){t()},1500)},loadmore:function(t){this.isEnd||L.dispatch("getProducts",{pageNo:this.pageNo+1}).then(function(){t()}).catch(function(){t()})}}},Ct={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("scroller",{attrs:{refreshText:"刷新中...","on-refresh":t.refresh,height:"95%","on-infinite":t.loadmore}},[i("div",{staticClass:"notice-box"},t._l(t.items,function(e,n){return i("div",{key:n,staticClass:"item",on:{click:function(i){return t.toDetail(e)}}},[i("div",{staticClass:"title"},[i("div",{staticClass:"icon iconfont",class:e.icon}),t._v(" "),i("div",{staticClass:"text"},[t._v(t._s(e.name))]),t._v(" "),i("div",{staticClass:"date"},[t._v(t._s(t._f("getGapDay")(e.modifyDate)))])]),t._v(" "),i("div",{staticClass:"content"},[i("img",{ref:e.id,refInFor:!0,staticStyle:{width:"100%","max-width":"600px"},attrs:{src:e.mainImgList[0].url,alt:""}})])])}),0)])},staticRenderFns:[]};var bt=i("VU/8")(wt,Ct,!1,function(t){i("ur+l")},"data-v-bf9075c6",null).exports,yt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"user-info"},[i("div",{staticClass:"name-box"},[i("div",{staticClass:"user-name"},[t._v(t._s(t.user.name))]),t._v(" "),i("div",{staticClass:"user-icon"},[i("img",{staticClass:"width-100",attrs:{src:t.user.icon,alt:""}})])]),t._v(" "),i("div",{staticClass:"content"},[i("div",{staticClass:"item"},[i("div",{staticClass:"left"},[t._v("积分："+t._s(t.user.score))]),t._v(" "),t._m(0)]),t._v(" "),i("div",{staticClass:"item"},[i("div",{staticClass:"left"},[t._v("我的推广码")]),t._v(" "),i("div",{staticClass:"right"},[i("span",{staticClass:"qrcode"},[i("img",{staticClass:"width-100",attrs:{src:t.user.qrImg,alt:""}})])])]),t._v(" "),t._m(1)]),t._v(" "),i("div",{staticClass:"footer"},[i("div",{staticClass:"upgrade-box"},[i("button",{staticClass:"upgrade"},[t._v("立即升级VIP "+t._s(t.user.vipFee)+"元/年")])]),t._v(" "),i("div",{staticClass:"buy-box"},[i("button",{staticClass:"buy"},[t._v("单次购买"+t._s(t.user.singFee)+"元")])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"right"},[e("span",{staticClass:"vip"},[this._v("vip")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"item"},[e("div",{staticClass:"left"},[this._v("设计师端口")]),this._v(" "),e("div",{staticClass:"right"},[e("span",{staticClass:"apply"},[this._v("申请")])])])}]};var _t=i("VU/8")({data:function(){return{user:{name:"毛瑞彬",icon:"static/test/1.jpg",qrImg:"static/test/2.jpg",score:100,vipFee:99,singFee:9}}}},yt,!1,function(t){i("36oo")},"data-v-7f0d1540",null).exports,xt={components:{},data:function(){return{id:this.$route.params.id,url:"/static/test/2.jpg"}},created:function(){L.dispatch("getProduct",{id:this.id})},computed:{productInfo:function(){return L.state.productInfo||{}}},methods:{toDetailGif:function(){this.$router.push(this.$route.path+"/gif")}}},Et={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"detail-box"},[e("div",{staticClass:"detail-img"},[e("img",{staticClass:"w-100",attrs:{src:this.productInfo.descImg,alt:""}})]),this._v(" "),e("div",{staticClass:"detail-btns"},[e("div",{staticClass:"btn left",on:{click:this.toDetailGif}},[this._v("\n            产品3维展示\n        ")]),this._v(" "),e("div",{staticClass:"btn right"},[this._v("\n            购买方案原型\n        ")])])])},staticRenderFns:[]};var Lt=i("VU/8")(xt,Et,!1,function(t){i("78s3")},"data-v-71c5472a",null).exports,St={components:{},data:function(){return{id:this.$route.params.id,url:"/static/test/2.jpg",show3d:!1}},created:function(){L.dispatch("getProduct",{id:this.id})},computed:{productInfo:function(){return L.state.productInfo||{}}}},kt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"detail-box"},[e("div",{staticClass:"detail-img"},[e("img",{staticClass:"w-100",attrs:{src:this.productInfo.gifImg,alt:""}})])])},staticRenderFns:[]};var Bt=i("VU/8")(St,kt,!1,function(t){i("3SXx")},"data-v-9edd685e",null).exports,Pt=0;var $t={name:"ShnModal",props:{visible:{type:Boolean,default:!1},title:{type:String,default:""},mask:{type:Boolean,default:!0},maskClosable:{type:Boolean,default:!0},styleObj:{type:Object,default:function(){return{}}}},data:function(){return{id:0,show:this.visible}},watch:{visible:function(t){this.show=t,this.show?(Pt=document.scrollingElement.scrollTop,document.body.style.position="fixed",document.body.style.top=-Pt+"px"):(document.body.style.position="",document.body.style.top="",document.scrollingElement.scrollTop=Pt)}},mounted:function(){},methods:{close:function(){this.$emit("close")}}},Dt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"shn-modal"},[i("transition",{attrs:{name:"shn-fade"}},[t.show&&t.mask?i("div",{staticClass:"shn-modal-mask",on:{click:function(e){t.maskClosable&&t.$emit("update:visible",!1),t.close()}}}):t._e()]),t._v(" "),i("transition",{attrs:{name:"shn-modal-fade"}},[t.show?i("div",{staticClass:"shn-modal-content"},[i("div",{staticClass:"shn-modal-content-box",style:t.styleObj},[i("div",{staticClass:"shn-modal-content-close",on:{click:function(e){return t.close()}}},[i("span",{staticClass:"shn-modal-close-x"},[t._v("\n                  X\n                ")])]),t._v(" "),t.title?i("div",{staticClass:"shn-modal-content-header"},[i("div",[t._v(t._s(t.title))])]):t._e(),t._v(" "),i("div",{staticClass:"shn-modal-content-body"},[t._t("body")],2),t._v(" "),i("div",{staticClass:"shn-modal-content-footer"},[t._t("footer")],2)])]):t._e()])],1)},staticRenderFns:[]};var Tt=i("VU/8")($t,Dt,!1,function(t){i("jz0f")},"data-v-48c81ae9",null).exports,Ft=i("YZ0n"),Ot={props:{title:{type:String,default:"确定删除吗"},show:{type:Boolean,default:!0},content:{type:String,default:""}},components:{modal:Tt},methods:{close:function(){this.$emit("close")},sure:function(){this.$emit("ok")}}},Gt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("modal",{attrs:{visible:t.show,title:t.title,"mask-closable":!1},on:{"update:visible":function(e){t.show=e},close:function(e){return t.close()}},scopedSlots:t._u([{key:"body",fn:function(){return[i("div",{staticStyle:{width:"300px",display:"flex"}},[t._v("\n             "+t._s(t.content)+"\n           ")])]},proxy:!0},{key:"footer",fn:function(){return[i("button",{staticClass:"btn",on:{click:t.close}},[t._v("取消")]),t._v(" "),i("button",{staticClass:"btn success",on:{click:t.sure}},[t._v("确定")])]},proxy:!0}])})},staticRenderFns:[]},Nt=i("VU/8")(Ot,Gt,!1,null,null,null).exports,zt={components:{VueCropper:Ft.VueCropper,Confirm:Nt,modal:Tt},props:{styleObj:{type:Object,default:function(){return{}}},type:{type:String,default:"image"},id:{type:Number,default:-1},url:{type:Object,default:function(){return _.uploadImg}},img:{type:String,default:""},thumbImg:{type:String,default:""},addIcon:{type:String,default:"/static/icon/add.png"},tip:{type:String,default:""},cropper:{type:Boolean,default:!1},fixed:{type:Boolean,default:!0},isImg:{type:Boolean,default:!0},fixedNumber:{type:Array,default:function(){return[1,1]}}},data:function(){return{confirmContent:"确定要删除此张图片吗？",showConfirm:!1,host:x.HOST,originPath:this.isImg?"/api/download/image/origin/":"/api/download/file/origin/",thumbPath:this.isImg?"/api/download/image/thumbnail/":"",isMaskShow:!1,showBigImg:!1,cropperImg:this.img||"",bgImg:this.img||"",cropperShow:!1,outputSize:.8,width:400,height:300,cropperInfo:{width:"100%",heigth:"100%"},previewImg:""}},watch:{img:function(t){this.cropperImg=t,this.bgImg=t}},computed:{showImgMask:function(){return this.isMaskShow&&this.img}},methods:{sure:function(){this.deleteImg(),this.showConfirm=!1},emitChange:function(t,e){var i=this;if("fileChange"===t){var n=new FormData;n.append("file",e.blob);var o=this.url;e.blob.type&&-1!==e.blob.type.indexOf("image/")&&"file"===this.type&&(o=_.uploadImg),this.$ajax(o,n).then(function(e){i.$emit(t,s()(e,{url:i.host+i.originPath+e.filename,thumbUrl:i.host+i.thumbPath+e.filename}))})}else this.$emit(t,e)},preview:function(t){this.showBigImg=!0},deleteImg:function(t){this.emitChange("deleteImg",{img:this.bgImg,id:this.id})},chooseFile:function(){this.$refs.input.click(),this.hideMask()},showMask:function(){this.img&&(this.isMaskShow=!0)},hideMask:function(){this.img&&(this.isMaskShow=!1)},fileChange:function(t){var e=this,i=(t.target||{}).files;if(i){var n=i[0],s=new FileReader;s.onload=function(t){e.cropperImg=t.target.result,e.cropper?e.cropperShow=!0:(e.bgImg=t.target.result,e.emitChange("fileChange",{base64:e.cropperImg,blob:n})),e.$refs.input.value=""},s.onerror=function(t){e.emitChange("fileChange",{base64:"",blob:n})},s.readAsDataURL(n)}},hideCropper:function(){this.hideMask(),this.cropperShow=!1},getBlob:function(){var t=this;return new l.a(function(e,i){t.$refs.cropper.getCropBlob(function(t){e(t)})})},getBase64:function(){var t=this;return new l.a(function(e,i){t.$refs.cropper.getCropData(function(t){e(t)})})},cropperConfirm:function(){var t=this;this.hideMask(),this.bgImg=this.previewImg,this.cropperShow=!1;var e=[this.getBlob(),this.getBase64()];l.a.all(e).then(function(e){t.emitChange("fileChange",{id:t.id,base64:e[1],blob:e[0]})})},realTime:function(t){var e=this;this.getBase64().then(function(t){e.previewImg=t})}}},Ut={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{width:"100%",height:"100%"}},[i("div",{staticClass:"item-container",style:Object.assign({},{backgroundImage:"url("+(t.thumbImg||t.img)+")"},t.styleObj)},[i("input",{ref:"input",staticClass:"file",attrs:{type:"file"},on:{mouseenter:function(e){return t.showMask()},change:function(e){return t.fileChange(e)}}}),t._v(" "),t.img?t._e():i("div",{staticClass:"tip"},[i("img",{attrs:{src:t.addIcon,alt:""}}),t._v(" "),i("span",[t._v(t._s(t.tip))])]),t._v(" "),t.showImgMask?i("div",{staticClass:"img-mask",on:{mouseleave:function(e){return t.hideMask()},click:function(e){return t.chooseFile()}}},[i("i",{attrs:{title:"预览"},on:{click:function(e){return e.stopPropagation(),t.preview(e)}}},[i("img",{staticClass:"icon",attrs:{src:"/static/icon/preview.png",alt:""}})]),t._v(" "),i("i",{attrs:{title:"删除"},on:{click:function(e){e.stopPropagation(),t.showConfirm=!0}}},[i("img",{staticClass:"icon",attrs:{src:"/static/icon/delete.png",alt:""}})])]):t._e()]),t._v(" "),i("modal",{staticClass:"showBigImg",attrs:{visible:t.showBigImg},on:{"update:visible":function(e){t.showBigImg=e},close:function(e){t.showBigImg=!1}},scopedSlots:t._u([{key:"body",fn:function(){return[i("div",{staticStyle:{width:"500px",height:"400px",display:"flex"}},[i("img",{staticStyle:{width:"100%"},attrs:{src:t.bgImg,alt:""}})])]},proxy:!0}])}),t._v(" "),i("modal",{attrs:{"mask-closable":!1,visible:t.cropperShow,title:"裁剪图片"},on:{"update:visible":function(e){t.cropperShow=e}},scopedSlots:t._u([{key:"body",fn:function(){return[i("div",{staticStyle:{width:"500px",height:"400px",display:"flex"}},[i("div",{staticClass:"preview"},[i("img",{staticStyle:{width:"100%"},attrs:{src:t.previewImg}})]),t._v(" "),i("vue-cropper",{ref:"cropper",staticClass:"cropper",attrs:{autoCropHeight:"100%","fixed-number":[t.width,t.height],full:!0,img:t.cropperImg,centerBox:!0,"output-size":t.outputSize,"auto-crop":!0,fixed:t.fixed,fixedNumber:t.fixedNumber},on:{realTime:t.realTime}})],1)]},proxy:!0},{key:"footer",fn:function(){return[i("button",{staticClass:"btn",on:{click:t.hideCropper}},[i("span",[t._v("取消")])]),t._v(" "),i("button",{staticClass:"btn success",on:{click:t.cropperConfirm}},[i("span",[t._v("确定")])])]},proxy:!0}])}),t._v(" "),i("Confirm",{attrs:{show:t.showConfirm,content:t.confirmContent},on:{close:function(e){t.showConfirm=!1},ok:t.sure}})],1)},staticRenderFns:[]};var jt=i("VU/8")(zt,Ut,!1,function(t){i("tjI8")},"data-v-a8343f8a",null).exports,Rt={components:{cropperItem:jt},props:{styleObj:{type:Object,default:function(){return{}}},itemStyleObj:{type:Object,default:function(){return{}}},imgInfoList:{type:Array,default:function(){return[]}}},data:function(){return{identId:0,newImg:"",items:this.imgInfoList}},methods:{addImg:function(t){this.identId++,t.identId=this.identId,this.items.push(t),this.newImg="",this.$emit("fileChange",this.items)},changeImg:function(t){var e=this.items.findIndex(function(e){return e.identId===t.id});this.items[e]=s()(this.items[e],t)},deleteImg:function(t){var e=this.items.findIndex(function(e){return e.identId===t.id});this.items.splice(e,1)}}},Ht={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ul",{style:t.styleObj},[t._l(t.items,function(e,n){return i("li",{key:n,staticClass:"change item",style:t.itemStyleObj},[i("cropperItem",{attrs:{id:e.identId,img:e.url,thumbImg:e.thumbUrl,index:n},on:{fileChange:t.changeImg,deleteImg:t.deleteImg}})],1)}),t._v(" "),i("li",{staticClass:"add item",style:t.itemStyleObj},[i("cropperItem",{attrs:{img:t.newImg},on:{fileChange:t.addImg}})],1)],2)},staticRenderFns:[]};var Mt=i("VU/8")(Rt,Ht,!1,function(t){i("PFMp")},"data-v-567a663a",null).exports,At={props:{pId:{type:Number,default:-1}},computed:{editDiologShow:{get:function(){return L.state.editDiologShow},set:function(t){L.commit("setEditDiologShow",t)}},isEdit:function(){return L.state.isEdit},editInfo:{get:function(){return L.state.editInfo},set:function(t){L.commit("setEditInfo",t)}}},methods:{updateMainImgList:function(t){this.editInfo.mainImgList=t},updateDesc:function(t){this.editInfo.descImgThumb=t.thumbUrl,this.editInfo.descImg=t.url},updateGif:function(t){this.editInfo.gifImg=t.url,this.editInfo.gifImgThumb=t.thumbUrl},updateFile:function(t){this.editInfo.originFile=t.url},deleteDesc:function(t){this.editInfo.descImgThumb="",this.editInfo.descImg=""},deleteGif:function(t){this.editInfo.gifImg="",this.editInfo.gifImgThumb=""},checkEditInfo:function(){var t=!0,e=!1,i=void 0;try{for(var n,s=r()([{key:"name",type:"string",value:"产品名称不能为空"},{key:"mainImgList",type:"array",value:"产品主图不能为空"},{key:"descImg",type:"string",value:"产品详情不能为空"},{key:"gifImg",type:"string",value:"产品动图不能为空"},{key:"originFile",type:"string",value:"产品原型不能为空"}]);!(t=(n=s.next()).done);t=!0){var o=n.value;if("string"===o.type&&!this.editInfo[o.key])return o.value;if("array"===o.type&&this.editInfo[o.key].length<1)return o.value}}catch(t){e=!0,i=t}finally{try{!t&&s.return&&s.return()}finally{if(e)throw i}}return""},save:function(){var t=this,e=this.checkEditInfo();if(e)return h(e);void 0===this.editInfo.pId&&(this.editInfo.pId=this.pId),this.editInfo.prize=+this.editInfo.prize,L.dispatch(this.isEdit?"editProduct":"addProduct",this.editInfo).then(function(){t.editDiologShow=!1})}},components:{modal:Tt,CroppperList:Mt,CropperItem:jt},data:function(){return{descImg:"",uploadFileUrl:_.uploadFile,dialogShow:this.show,isUpload:!1,styleObj:{backgroundColor:"#EBEBEB"},itemStyleObj:{width:"60px",height:"60px",backgroundColor:"#fff",borderRadius:"7px",overflow:"hidden"},uploadStyleObj:{backgroundColor:"#EBEBEB",color:"#000"}}}},Wt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("modal",{attrs:{visible:t.editDiologShow,styleObj:t.styleObj,title:(t.isEdit?"编辑":"新增")+"产品"},on:{"update:visible":function(e){t.editDiologShow=e},close:function(e){t.editDiologShow=!1}},scopedSlots:t._u([{key:"body",fn:function(){return[i("div",{staticClass:"form-container"},[i("div",{staticClass:"form"},[i("div",{staticClass:"item name"},[i("div",{staticClass:"left"},[t._v("产品名称")]),t._v(" "),i("div",{staticClass:"right"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.editInfo.name,expression:"editInfo.name"}],attrs:{type:"text",placeholder:"请输入产品名称"},domProps:{value:t.editInfo.name},on:{input:function(e){e.target.composing||t.$set(t.editInfo,"name",e.target.value)}}})])]),t._v(" "),i("div",{staticClass:"item main"},[i("div",{staticClass:"left"},[t._v("产品主图")]),t._v(" "),i("div",{staticClass:"right"},[i("CroppperList",{attrs:{imgInfoList:t.editInfo.mainImgList,itemStyleObj:t.itemStyleObj},on:{fileChange:t.updateMainImgList}})],1)]),t._v(" "),i("div",{staticClass:"item desc"},[i("div",{staticClass:"left"},[t._v("产品详情")]),t._v(" "),i("div",{staticClass:"right"},[i("CropperItem",{attrs:{img:t.editInfo.descImg,thumbImg:t.editInfo.descImgThumb,cropper:!1},on:{fileChange:t.updateDesc,deleteImg:function(e){return t.deleteDesc()}}})],1)]),t._v(" "),i("div",{staticClass:"item gif"},[i("div",{staticClass:"left"},[t._v("产品动图")]),t._v(" "),i("div",{staticClass:"right"},[i("CropperItem",{attrs:{cropper:!1,img:t.editInfo.gifImg},on:{fileChange:t.updateGif,deleteImg:function(e){return t.deleteGif()}}})],1)]),t._v(" "),i("div",{staticClass:"item file"},[i("div",{staticClass:"left"},[t._v("产品原文件")]),t._v(" "),i("div",{staticClass:"right"},[i("div",{staticClass:"upload"},[i("button",{staticClass:"btn file"},[i("CropperItem",{attrs:{type:"file",url:t.uploadFileUrl,cropper:!1,styleObj:t.uploadStyleObj,addIcon:"",tip:"点击上传",isImg:!1},on:{fileChange:t.updateFile}})],1),t._v(" "),i("span",{class:{active:t.editInfo.originFile}},[t._v("已上传")]),t._v("/\n                              "),i("span",{class:{active:!t.editInfo.originFile}},[t._v("未上传")])]),t._v(" "),i("div",{staticClass:"prize"},[i("span",[t._v("原文件价格")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.editInfo.prize,expression:"editInfo.prize"}],staticClass:"btn danger",domProps:{value:t.editInfo.prize},on:{input:function(e){e.target.composing||t.$set(t.editInfo,"prize",e.target.value)}}}),t._v(" 元\n                            ")])])]),t._v(" "),i("div",{staticClass:"item",on:{click:function(e){return t.save()}}},[i("button",{staticClass:"btn danger save"},[t._v("完成保存")])])])])]},proxy:!0}])})},staticRenderFns:[]};var Vt=i("VU/8")(At,Wt,!1,function(t){i("jYlU")},"data-v-1402e70a",null).exports,qt={props:{pId:{type:Number,default:-1}},computed:{editDiologShow:{get:function(){return L.state.bEditDiologShow},set:function(t){L.commit("setBEditDiologShow",t)}},isEdit:function(){return L.state.isBEdit},editInfo:{get:function(){return L.state.bEditInfo},set:function(t){L.commit("setBEditInfo",t)}}},methods:{checkEditInfo:function(){var t=!0,e=!1,i=void 0;try{for(var n,s=r()([{key:"name",type:"string",value:"大系列名称不能为空"}]);!(t=(n=s.next()).done);t=!0){var o=n.value;if("string"===o.type&&!this.editInfo[o.key])return o.value;if("array"===o.type&&this.editInfo[o.key].length<1)return o.value}}catch(t){e=!0,i=t}finally{try{!t&&s.return&&s.return()}finally{if(e)throw i}}return""},save:function(){var t=this,e=this.checkEditInfo();if(e)return h(e);L.dispatch(this.isEdit?"editBseries":"addBseries",this.editInfo).then(function(){t.editDiologShow=!1})}},components:{modal:Tt},data:function(){return{descImg:"",uploadUrl:_.uploadImg,dialogShow:this.show,isUpload:!1,styleObj:{backgroundColor:"#EBEBEB",height:"300px"},itemStyleObj:{width:"60px",height:"60px",backgroundColor:"#fff",borderRadius:"7px",overflow:"hidden"},uploadStyleObj:{backgroundColor:"#EBEBEB",color:"#000"}}}},Xt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("modal",{attrs:{visible:t.editDiologShow,styleObj:t.styleObj,title:(t.isEdit?"编辑":"新增")+"大系列"},on:{"update:visible":function(e){t.editDiologShow=e},close:function(e){t.editDiologShow=!1}},scopedSlots:t._u([{key:"body",fn:function(){return[i("div",{staticClass:"form-container"},[i("div",{staticClass:"form"},[i("div",{staticClass:"item name"},[i("div",{staticClass:"left"},[t._v("大类名称")]),t._v(" "),i("div",{staticClass:"right"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.editInfo.name,expression:"editInfo.name"}],attrs:{type:"text",placeholder:"请输入大系列名称"},domProps:{value:t.editInfo.name},on:{input:function(e){e.target.composing||t.$set(t.editInfo,"name",e.target.value)}}})])]),t._v(" "),i("div",{staticClass:"item",on:{click:function(e){return t.save()}}},[i("button",{staticClass:"btn danger save"},[t._v("完成保存")])])])])]},proxy:!0}])})},staticRenderFns:[]};var Zt=i("VU/8")(qt,Xt,!1,function(t){i("n1bA")},"data-v-e1a6b6dc",null).exports,Yt=i("mvHQ"),Qt=i.n(Yt),Jt={computed:{editDiologShow:{get:function(){return L.state.lEditDiologShow},set:function(t){L.commit("setLEditDiologShow",t)}},isEdit:function(){return L.state.isLEdit},editInfo:{get:function(){return L.state.lEditInfo},set:function(t){L.commit("setLEditInfo",t)}}},methods:{deleteMain:function(){this.editInfo.mainImg="",this.editInfo.mainImgThumb=""},updateMain:function(t){console.log(Qt()(this.editInfo)),console.log("data is: ",t),this.editInfo.mainImg=t.url,this.editInfo.mainImgThumb=t.thumbUrl},checkEditInfo:function(){var t=!0,e=!1,i=void 0;try{for(var n,s=r()([{key:"name",type:"string",value:"小系列名称不能为空"},{key:"mainImg",type:"string",value:"小系列主图不能为空"}]);!(t=(n=s.next()).done);t=!0){var o=n.value;if("string"===o.type&&!this.editInfo[o.key])return o.value;if("array"===o.type&&this.editInfo[o.key].length<1)return o.value}}catch(t){e=!0,i=t}finally{try{!t&&s.return&&s.return()}finally{if(e)throw i}}return""},save:function(){var t=this,e=this.checkEditInfo();if(e)return h(e);L.dispatch(this.isEdit?"editLseries":"addLseries",this.editInfo).then(function(){t.editDiologShow=!1})}},components:{modal:Tt,CropperItem:jt},data:function(){return{descImg:"",uploadUrl:_.uploadImg,dialogShow:this.show,isUpload:!1,styleObj:{backgroundColor:"#EBEBEB",height:"300px"},itemStyleObj:{width:"60px",height:"60px",backgroundColor:"#fff",borderRadius:"7px",overflow:"hidden"},uploadStyleObj:{backgroundColor:"#EBEBEB",color:"#000"}}}},Kt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("modal",{attrs:{visible:t.editDiologShow,styleObj:t.styleObj,title:(t.isEdit?"编辑":"新增")+"小系列"},on:{"update:visible":function(e){t.editDiologShow=e},close:function(e){t.editDiologShow=!1}},scopedSlots:t._u([{key:"body",fn:function(){return[i("div",{staticClass:"form-container"},[i("div",{staticClass:"form"},[i("div",{staticClass:"item name"},[i("div",{staticClass:"left"},[t._v("小系列名称")]),t._v(" "),i("div",{staticClass:"right"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.editInfo.name,expression:"editInfo.name"}],attrs:{type:"text",placeholder:"请输入小系列名称"},domProps:{value:t.editInfo.name},on:{input:function(e){e.target.composing||t.$set(t.editInfo,"name",e.target.value)}}})])]),t._v(" "),i("div",{staticClass:"item desc"},[i("div",{staticClass:"left"},[t._v("小系列主图")]),t._v(" "),i("div",{staticClass:"right"},[i("CropperItem",{attrs:{img:t.editInfo.mainImg,cropper:!1,url:t.uploadUrl},on:{fileChange:t.updateMain,deleteImg:function(e){return t.deleteMain()}}})],1)]),t._v(" "),i("div",{staticClass:"item",on:{click:function(e){return t.save()}}},[i("button",{staticClass:"btn danger save"},[t._v("完成保存")])])])])]},proxy:!0}])})},staticRenderFns:[]};var te={components:{ProductEdit:Vt,BseriesEdit:Zt,LseriesEdit:i("VU/8")(Jt,Kt,!1,function(t){i("BpHf")},"data-v-5b6be231",null).exports,Confirm:Nt},data:function(){return{isBig:!1,currentBseries:null,currentLseries:null,showConfirm:!1,confirmContent:"",activeId:-2,pId:-1,showDialog:!1,height:window.screen.availHeight-10}},computed:{list:function(){return L.state.bseriesList}},created:function(){L.dispatch("getBserieses")},methods:{addLseries:function(t){if(t){var e={name:"",mainImg:"",mainImgThumb:"",bId:t};L.commit("setLEditing",!1),L.commit("setLEditInfo",e),L.commit("setLEditDiologShow",!0)}},changeLseries:function(t){L.commit("setLEditing",!0),L.commit("setLEditInfo",t),L.commit("setLEditDiologShow",!0)},moveL:function(t,e,i,n){if(i){var s="up"===i?n[e-1]:n[e+1];L.dispatch("moveLseries",{start:t.lId,end:s.lId})}},move:function(t,e,i,n){if(i){var s="up"===i?n[e-1]:n[e+1];L.dispatch("moveBseries",{start:t.bId,end:s.bId})}},sure:function(){if(this.isBig){if(!this.currentBseries)return;L.dispatch("deleteBseries",this.currentBseries),this.showConfirm=!1}else{if(!this.currentLseries)return;L.dispatch("deleteLseries",this.currentLseries),this.showConfirm=!1}},changeSeries:function(t){L.commit("setBEditing",!0),L.commit("setBEditInfo",t),L.commit("setBEditDiologShow",!0)},deleteLSeries:function(t){this.isBig=!1,this.showConfirm=!0,this.currentLseries=t,this.confirmContent="确定要删除小系列 "+t.name+" 吗？"},deleteSeries:function(t){this.isBig=!0,this.showConfirm=!0,this.currentBseries=t,this.confirmContent="确定要删除大系列 "+t.name+" 吗？"},addSeries:function(){L.commit("setBEditing",!1),L.commit("setBEditInfo",{name:""}),L.commit("setBEditDiologShow",!0)},addProduct:function(){if(!this.currentLseries||!this.currentLseries.lId)return h("请先选中小系列");var t={lId:this.currentLseries.lId,name:"",mainImgList:[],descImgThumb:"",descImg:"",gifImg:"",originFile:"",prize:0};L.commit("setEditing",!1),L.commit("setEditInfo",t),L.commit("setEditDiologShow",!0)},showDesc:function(t){t.lId&&(this.activeId=t.lId,this.currentLseries=t,this.$router.push("/admin/"+t.lId))}}},ee={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"admin-container",style:{height:t.height+"px"}},[i("div",{staticClass:"admin-nav"},[i("div",{staticClass:"title"},[i("div",{staticClass:"text",on:{click:function(e){return t.addSeries()}}},[t._v("+产品管理")])]),t._v(" "),i("div",{staticClass:"content",style:{height:t.height-120+"px"}},[i("ul",t._l(t.list,function(e,n){return i("li",{key:n,staticClass:"big-class"},[i("div",{staticClass:"title-box",class:{active:e.bid===t.activeId}},[i("div",{staticClass:"left",attrs:{title:e.name}},[t._v("\n                                "+t._s(t._f("ellipsis")(e.name,6))+"\n                            ")]),t._v(" "),i("div",{staticClass:"right"},[i("div",{staticClass:"operation",on:{click:function(i){return i.stopPropagation(),t.deleteSeries(e)}}},[t._v("删除")]),t._v(" "),i("div",{staticClass:"operation",on:{click:function(i){return i.stopPropagation(),t.addLseries(e.bId)}}},[t._v("添加")]),t._v(" "),0!==n?i("div",{staticClass:"operation",on:{click:function(i){return i.stopPropagation(),t.move(e,n,"up",t.list)}}},[t._v("上移")]):t._e(),t._v(" "),n!==t.list.length-1?i("div",{staticClass:"operation",on:{click:function(i){return i.stopPropagation(),t.move(e,n,"down",t.list)}}},[t._v("下移")]):t._e(),t._v(" "),i("div",{staticClass:"operation",on:{click:function(i){return i.stopPropagation(),t.changeSeries(e)}}},[t._v("编辑")])])]),t._v(" "),i("ul",t._l(e.children,function(n,s){return i("li",{key:s,staticClass:"little-class",class:{active:n.lId===t.activeId},on:{click:function(e){return e.stopPropagation(),t.showDesc(n)}}},[i("div",{staticClass:"title-box"},[i("div",{staticClass:"left",attrs:{title:n.name}},[t._v("\n                                          "+t._s(t._f("ellipsis")(n.name,5))+"\n                                    ")]),t._v(" "),i("div",{staticClass:"right"},[i("div",{staticClass:"operation",on:{click:function(e){return e.stopPropagation(),t.deleteLSeries(n)}}},[t._v("删除")]),t._v(" "),0!==s?i("div",{staticClass:"operation",on:{click:function(i){return i.stopPropagation(),t.moveL(n,s,"up",e.children)}}},[t._v("上移")]):t._e(),t._v(" "),s!==e.children.length-1?i("div",{staticClass:"operation",on:{click:function(i){return i.stopPropagation(),t.moveL(n,s,"down",e.children)}}},[t._v("下移")]):t._e(),t._v(" "),i("div",{staticClass:"operation",on:{click:function(e){return e.stopPropagation(),t.changeLseries(n)}}},[t._v("编辑")])])])])}),0)])}),0)]),t._v(" "),i("div",{staticClass:"footer",on:{click:function(e){return t.addProduct()}}},[i("div",{staticClass:"text"},[t._v("添加产品")])])]),t._v(" "),i("div",{staticClass:"admin-child"},[i("router-view")],1)]),t._v(" "),i("div",{staticStyle:{position:"absolute"}},[i("ProductEdit",{attrs:{pId:t.pId}}),t._v(" "),i("BseriesEdit"),t._v(" "),i("LseriesEdit"),t._v(" "),i("Confirm",{attrs:{show:t.showConfirm,content:t.confirmContent},on:{close:function(e){t.showConfirm=!1},ok:t.sure}})],1)])},staticRenderFns:[]};var ie=i("VU/8")(te,ee,!1,function(t){i("YECy")},"data-v-4d337ac1",null).exports,ne={components:{ProductEdit:Vt,Confirm:Nt,WaterFall:Q,WaterfallSlot:nt},created:function(){L.dispatch("getProducts",{lId:this.id})},computed:{items:function(){var t=L.state.productList.map(function(t){return g()({},t,{width:700,height:200})});return t},id:function(){return+this.$route.params.id}},watch:{id:function(t){L.dispatch("getProducts",{lId:this.id})},items:function(t){this.productList=t}},data:function(){return{productInfo:{},showConfirm:!1,title:"提示",confirmContent:"",productList:L.state.productList}},methods:{getCurrentHeight:function(t){t.mainImgList&&t.mainImgList[0]&&u((t.mainImgList[0]||{}).thumbUrl,t.width).then(function(e){console.log("height: ",t),t.height=e,console.log("item: ",t.height)})},loadmore:function(){},sure:function(){var t=this;L.dispatch("deleteProduct",{id:this.productInfo.id,lId:this.productInfo.lId}).then(function(){t.showConfirm=!1})},move:function(t,e,i,n){if(i){var s="up"===i?n[e-1]:n[e+1];L.dispatch("moveProduct",{start:t.id,end:s.id,lId:t.lId})}},deleteProduct:function(t){t&&(this.productInfo=t,this.showConfirm=!0,this.confirmContent="确定删除 "+t.name+" 吗？")},showDialog:function(t){t&&(this.productInfo=t,L.commit("setEditing",!0),L.commit("setEditInfo",this.productInfo),L.commit("setEditDiologShow",!0))}}},se={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("WaterFall",{staticClass:"item-box",attrs:{"line-gap":200},on:{loadmore:t.loadmore}},t._l(t.productList,function(e,n){return i("waterfall-slot",{key:e.index,attrs:{width:e.width,height:e.height,order:n,"move-class":"item-move"}},[i("div",{staticClass:"item"},[i("img",{staticStyle:{width:"100%"},attrs:{src:e.mainImgList&&e.mainImgList[0].thumbUrl,alt:""},on:{load:function(i){return t.getCurrentHeight(e)}}}),t._v(" "),i("div",{staticClass:"desc"},[i("div",{staticClass:"left",attrs:{title:e.name}},[t._v(t._s(t._f("ellipsis")(e.name,6)))]),t._v(" "),i("div",{staticClass:"right"},[i("div",{staticClass:"delete",on:{click:function(i){return i.stopPropagation(),t.deleteProduct(e)}}},[t._v("删除")]),t._v(" "),i("div",{staticClass:"move",on:{click:function(i){return i.stopPropagation(),t.showDialog(e)}}},[t._v("编辑")]),t._v(" "),n!==t.items.length-1?i("div",{staticClass:"operation",on:{click:function(i){return i.stopPropagation(),t.move(e,n,"down",t.items)}}},[t._v("后移")]):t._e(),t._v(" "),0!==n?i("div",{staticClass:"operation",on:{click:function(i){return i.stopPropagation(),t.move(e,n,"up",t.items)}}},[t._v("前移")]):t._e()])])])])}),1),t._v(" "),i("ProductEdit",{attrs:{show:t.showDialog,pId:t.productInfo.pId}}),t._v(" "),i("Confirm",{attrs:{show:t.showConfirm,title:t.title,content:t.confirmContent},on:{close:function(e){t.showConfirm=!1},ok:t.sure}})],1)},staticRenderFns:[]};var oe=i("VU/8")(ne,se,!1,function(t){i("BqfB")},"data-v-4af92550",null).exports,ae=D.a.prototype.push;D.a.prototype.push=function(t){return ae.call(this,t).catch(function(t){return t})},o.a.use(D.a);var re=new D.a({mode:"history",routes:[{path:"/",name:"home",component:at},{path:"/classify",name:"classify",component:lt},{path:"/collect",name:"collect",component:It},{path:"/notice",name:"notice",component:bt},{path:"/user",name:"user",component:_t},{path:"/:id/littleClass",name:"littleClass",component:pt},{path:"/detail/:id",name:"detail",component:Lt},{path:"/detail/:id/gif",name:"detailGif",component:Bt},{path:"/admin",name:"admin",component:ie,redirect:"/admin/0",children:[{path:"/admin/:id",name:"product",component:oe}]}]}),ce=i("8+8L"),le=i("POcy"),de=i.n(le),ue=i("MdTC"),he=i.n(ue),fe=(i("GdEX"),{name:"MeScrollVue",data:function(){return{mescroll:null,lastScrollTop:0,lastBounce:null}},props:{up:Object,down:Object},mounted:function(){this.mescroll=new he.a(this.$refs.mescroll,{up:this.up,down:this.down}),this.$emit("init",this.mescroll)},methods:{beforeRouteEnter:function(){var t=this;this.mescroll&&(this.lastScrollTop&&(this.mescroll.setScrollTop(this.lastScrollTop),setTimeout(function(){t.mescroll.setTopBtnFadeDuration(0)},16)),null!=this.lastBounce&&this.mescroll.setBounce(this.lastBounce))},beforeRouteLeave:function(){this.mescroll&&(this.lastScrollTop=this.mescroll.getScrollTop(),this.mescroll.hideTopBtn(0),this.lastBounce=this.mescroll.optUp.isBounce,this.mescroll.setBounce(!0))}}}),me={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{ref:"mescroll",staticClass:"mescroll"},[e("div",[this._t("default")],2)])},staticRenderFns:[]};var pe=i("VU/8")(fe,me,!1,function(t){i("8Hz4")},null,null).exports;o.a.prototype.$ajax=w;var ve=[{ellipsis:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return t.length>e?t.slice(0,e-1)+"...":t}}],ge=!0,Ie=!1,we=void 0;try{for(var Ce,be=r()(ve);!(ge=(Ce=be.next()).done);ge=!0){var ye=Ce.value;for(var _e in ye){if("function"!=typeof ye[_e])break;o.a.filter(_e,ye[_e])}}}catch(t){Ie=!0,we=t}finally{try{!ge&&be.return&&be.return()}finally{if(Ie)throw we}}o.a.config.productionTip=!1,o.a.use(ce.a),o.a.http.options.emulateHTTP=!1,o.a.http.interceptors.push(function(t,e){window.localStorage.getItem("token")&&t.headers.set("authorization","Bearer "+window.localStorage.getItem("token")),e(function(t){return 401===t.status&&(L.commit("unset_user"),re.go({name:"login"})),200===t.status?s()({},t.body,{ok:!0}):t})}),d()?o.a.component("scroller",{template:"<div><slot></slot></div>"}):(o.a.use(de.a),o.a.component("mescroll",pe)),o.a.config.productionTip=!1,new o.a({el:"#app",router:re,components:{App:$},template:"<App/>"})},PFMp:function(t,e){},YECy:function(t,e){},bZhl:function(t,e){},jYlU:function(t,e){},jz0f:function(t,e){},klj4:function(t,e){},merk:function(t,e){},n1bA:function(t,e){},nCzU:function(t,e){},nDQ0:function(t,e){},qk1l:function(t,e){},tjI8:function(t,e){},"ur+l":function(t,e){},xFEl:function(t,e){},yRND:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.426b867cc4446d56d524.js.map