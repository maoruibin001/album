webpackJsonp([1],{0:function(t,e){},"0Jey":function(t,e){},"25hb":function(t,e){},"2XCy":function(t,e){},"36oo":function(t,e){},"57ZT":function(t,e){},GHdw:function(t,e){},HnxF:function(t,e){},KQ2A:function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("woOf"),s=i.n(n),o=i("7+uW"),a=i("BO1k"),r=i.n(a),c=i("//Fk"),l=i.n(c);function d(){return!/Android | webOS |iPhone | iPod | BlackBerry/i.test(navigator.userAgent)}function u(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;return new l.a(function(s,o){var a=new Image;if(a.src=t,a.width>0||a.height>0){var r=(e-i)*(a.height/a.width)+n;return s(r)}var c=setInterval(function(){if(a.width>0||a.height>0){var t=(e-i)*(a.height/a.width)+n;return clearInterval(c),s(t)}},30)})}function h(t,e){e=isNaN(e)?3e3:e;var i=document.createElement("div");i.innerHTML=t,i.style.cssText="max-width:60%;min-width: 150px;padding:0 14px;height: 40px;color: rgb(255, 255, 255);line-height: 40px;text-align: center;border-radius: 4px;position: fixed;top: 50%;left: 50%;transform: translate(-50%, -50%);z-index: 999999;background: rgba(0, 0, 0,.7);font-size: 16px;",document.body.appendChild(i),setTimeout(function(){i.style.webkitTransition="-webkit-transform 0.5s ease-in, opacity 0.5s ease-in",i.style.opacity="0",setTimeout(function(){document.body.removeChild(i)},500)},e)}var f={data:function(){return{isPc:d(),navList:[{id:1,text:"首页",isActive:!0,iconClass:"iconzu3",path:"/",params:{}},{id:2,text:"分类",isActive:!1,iconClass:"iconzu2",path:"/classify",params:{},children:[{id:5,text:"小类",isActive:!1,iconClass:"iconzu2",path:"/littleClass",params:{}}]},{id:3,text:"通知",isActive:!1,iconClass:"iconzu1",path:"/notice",params:{}},{id:4,text:"收藏",isActive:!1,iconClass:"iconzu4",path:"/collect",params:{}}]}},created:function(){var t=this.$route.path,e=null;if(t){var i=!0,n=!1,s=void 0;try{for(var o,a=r()(this.navList);!(i=(o=a.next()).done);i=!0){var c=o.value;if(c.path===t){e=c;break}if(c.children){var l=!0,d=!1,u=void 0;try{for(var h,f=r()(c.children);!(l=(h=f.next()).done);l=!0){var m=h.value;if(-1!==t.indexOf(m.path)){e=c;break}}}catch(t){d=!0,u=t}finally{try{!l&&f.return&&f.return()}finally{if(d)throw u}}}}}catch(t){n=!0,s=t}finally{try{!i&&a.return&&a.return()}finally{if(n)throw s}}e&&this.chooseItem(e,!0)}},methods:{chooseItem:function(t,e){t&&(this.navList.forEach(function(e){e.isActive=e.id===t.id}),e||this.$router.push(t.path))}}},m={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ul",{class:t.isPc?"pc-nav-bar":"nav-bar"},t._l(t.navList,function(e,n){return i("li",{key:n,class:t.isPc?"pc-bar-item":"bar-item",on:{click:function(i){return t.chooseItem(e)}}},[i("div",{class:{"pc-item-box":t.isPc,active:e.isActive}},[i("div",{staticClass:"icon iconfont",class:e.iconClass}),t._v(" "),i("div",{staticClass:"text"},[t._v(t._s(e.text))])])])}),0)},staticRenderFns:[]};var p=i("VU/8")(f,m,!1,function(t){i("bZhl")},"data-v-10804436",null).exports,v=i("Dd8w"),g=i.n(v),w=i("NYxO");function C(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1],i=t.method,n=t.type,s=void 0===n?"post":n,a=i.indexOf(":");if(-1!==a){var r=i.slice(a+1);i=i.slice(0,a)+e[r]}return"post"===s||"put"===s?o.a.http[s](i,e):o.a.http[s](i,{params:e})}var _={add:{method:"/api/product"},delete:{method:"/api/product/:id",type:"delete"},edit:{method:"/api/product/:id",type:"put"},getAll:{method:"/api/products",type:"get"},get:{method:"/api/product/:id",type:"get"}},I={upload:{method:"/api/upload/image"}},y=10,b=1;o.a.use(w.a);var x=new w.a.Store({state:{productList:[],productInfo:{},editDiologShow:!1,isEdit:!1,isEnd:!1,pageNo:b,pageSize:y,productImgList:[],editInfo:{name:"",mainImgList:[],descImgThumb:"",descImg:"",gifImg:"",originFile:"",prize:0}},mutations:{setProductList:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];t.productList=e},addProductList:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];t.productList=t.productList.concat(e)},setIsEnd:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.isEdit=e},setPageNo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;t.pageNo=e},setPageSize:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;t.pageSize=e},setProductInfo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.productInfo=e},setProductImgList:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];t.productImgList=e}},actions:{getProducts:function(t,e){var i=t.commit,n=(t.dispatch,e.pageNo),s=void 0===n?b:n,o=e.pageSize,a=void 0===o?y:o;return C(_.getAll,g()({},e,{pageNo:s,pageSize:a})).then(function(t){var e=t.data;i(1===s?"setProductList":"addProductList",e.products),i("setIsEnd",!!e.isEnd),i("setPageNo",s),i("setPageSize",a)}).catch(function(t){h(t.msg||t.body.msg)})},getProduct:function(t,e){var i=t.commit;t.dispatch;return C(_.get,e).then(function(t){var e=t.data;i("setProductInfo",e),i("setProductImgList",e.children)}).catch(function(t){h(t.msg||t.body.msg)})}}}),k={data:function(){return{isPc:d(),searchText:""}},computed:{needGap:function(){return-1!==["/","/notice","/home","/collect","/classify"].indexOf(this.$route.path)},homeItems:function(){return x.state.productList.map(function(t){return g()({},t,{width:130,height:140})})}},methods:{toUser:function(){this.$router.push("/user")},search:function(t){var e=this;switch(this.$route.path){case"/":case"/classify":x.dispatch("getProducts",{pId:-1}).then(function(){if(t){var i=e.homeItems.filter(function(e){return-1!==e.name.indexOf(t)});x.commit("setProductList",i)}else x.commit("setProductList",e.homeItems)});break;case"/collect":case"/notice":x.dispatch("getProducts",{pId:-100}).then(function(){if(t){var i=e.homeItems.filter(function(e){return-1!==e.name.indexOf(t)});x.commit("setProductList",i)}else x.commit("setProductList",e.homeItems)})}console.log()}}},L={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"search-bar",class:{"top-gap":t.needGap,"left-gap":t.isPc}},[i("div",{staticClass:"search-container"},[i("div",{staticClass:"search-box"},[i("span",{staticClass:"search-icon iconfont iconzu7"}),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],staticClass:"search-input",attrs:{type:"text",placeholder:"查找"},domProps:{value:t.searchText},on:{change:function(e){return t.search(t.searchText)},input:function(e){e.target.composing||(t.searchText=e.target.value)}}})]),t._v(" "),i("div",{staticClass:"person-box",on:{click:function(e){return t.toUser()}}},[i("div",{staticClass:"person-icon iconfont iconfuhao"})])])])},staticRenderFns:[]};var E={name:"App",components:{Navbar:p,Search:i("VU/8")(k,L,!1,function(t){i("GHdw")},"data-v-5f32fbc0",null).exports},computed:{showNavbar:function(){return-1!==["/","/notice","/home","/collect","/classify"].indexOf(this.$route.path)||-1!==this.$route.path.indexOf("/littleClass")},needGap:function(){return-1!==["/","/notice","/home","/collect","/classify"].indexOf(this.$route.path)},notNeedGap:function(){return-1!==this.$route.path.indexOf("/admin")||-1!==this.$route.path.indexOf("/detail")}},data:function(){return{isPc:d()}}},P={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:{"left-gap":t.isPc&&!t.notNeedGap},attrs:{id:"app"}},[t.showNavbar?i("Search"):t._e(),t._v(" "),i("router-view",{class:{"top-gap":!t.notNeedGap,"bottom-gap":!t.notNeedGap}}),t._v(" "),t.showNavbar?i("Navbar"):t._e()],1)},staticRenderFns:[]};var S=i("VU/8")(E,P,!1,function(t){i("xFEl")},null,null).exports,$=i("/ocq"),F="_wfMoveClass",D={props:{autoResize:{default:!0},interval:{default:200,validator:function(t){return t>=0}},align:{default:"left",validator:function(t){return~["left","right","center"].indexOf(t)}},line:{default:"v",validator:function(t){return~["v","h"].indexOf(t)}},lineGap:{required:!0,validator:function(t){return t>=0}},minLineGap:{validator:function(t){return t>=0}},maxLineGap:{validator:function(t){return t>=0}},singleMaxWidth:{validator:function(t){return t>=0}},fixedHeight:{default:!1},grow:{validator:function(t){return t instanceof Array}},watch:{default:function(){return{}}}},data:function(){return{style:{height:"",overflow:""},token:null}},methods:{reflowHandler:function(){clearTimeout(this.token),this.token=setTimeout(this.reflow,this.interval)},autoResizeHandler:function(t){!1!==t&&this.autoResize?j(window,"resize",this.reflowHandler,!1):A(window,"resize",this.reflowHandler,!1)},reflow:function(){var t=this;if(!this.$el)return;var e=this.$el.clientWidth,i=this.$children.map(function(t){return t.getMeta()});i.sort(function(t,e){return t.order-e.order}),this.virtualRects=i.map(function(){return{}}),T(this,i,this.virtualRects),setTimeout(function(){var n;n=t.$el,e!==n.clientWidth&&T(t,i,t.virtualRects),t.style.overflow="hidden",function(t,e){var i=e.filter(function(t){return t.moveClass}),n=B(i);!function(t,e){t.forEach(function(t,i){var n=e[i].node.style;for(var s in e[i].vm.rect=t,t)n[s]=t[s]+"px"})}(t,e);var s=B(i);i.forEach(function(t,e){var i,o,a,r,c,l,d;t.node[F]=t.moveClass,i=t.node,o=n[e],a=s[e],r=o.left-a.left,c=o.top-a.top,l=o.width/a.width,d=o.height/a.height,i.style.transform=i.style.WebkitTransform="translate("+r+"px,"+c+"px) scale("+l+","+d+")",i.style.transitionDuration="0s"}),document.body.clientWidth,i.forEach(function(t){var e;!function(t,e){if(!function(t,e){return new RegExp("\\b"+e+"\\b").test(U(t,"class"))}(t,e)){var i=U(t,"class").trim(),n=(i+" "+e).trim();U(t,"class",n)}}(t.node,t.moveClass),(e=t.node).style.transform=e.style.WebkitTransform="",e.style.transitionDuration=""})}(t.virtualRects,i),t.$emit("reflowed",t)},0)}},created:function(){var t=this;this.virtualRects=[],this.$on("reflow",function(){t.reflowHandler()}),this.$watch(function(){return t.align,t.line,t.lineGap,t.minLineGap,t.maxLineGap,t.singleMaxWidth,t.fixedHeight,t.watch},this.reflowHandler),this.$watch("grow",this.reflowHandler)},mounted:function(){this.$watch("autoResize",this.autoResizeHandler),j(this.$el,H(),z,!0),this.autoResizeHandler(this.autoResize)},beforeDestroy:function(){this.autoResizeHandler(!1),A(this.$el,H(),z,!0)}};function z(t){var e,i,n,s=t.target,o=s[F];o&&(e=s,i=new RegExp("\\s*\\b"+o+"\\b\\s*","g"),n=U(e,"class").replace(i," ").trim(),U(e,"class",n))}function T(t,e,i){var n=function(t){var e=t.maxLineGap?+t.maxLineGap:t.lineGap;return{align:~["left","right","center"].indexOf(t.align)?t.align:"left",line:~["v","h"].indexOf(t.line)?t.line:"v",lineGap:+t.lineGap,minLineGap:t.minLineGap?+t.minLineGap:t.lineGap,maxLineGap:e,singleMaxWidth:Math.max(t.singleMaxWidth||0,e),fixedHeight:!!t.fixedHeight,grow:t.grow&&t.grow.map(function(t){return+t})}}(t);("h"===t.line?O:N).calculate(t,n,e,i)}var N=function(){return{calculate:function(t,e,i,n){var s=t.$el.clientWidth,o=e.grow,a=o?function(t,e){var i=R(e);return{width:e.map(function(e){return t*e/i}),count:e.length,left:0}}(s,o):function(t,e){var i=t/e.lineGap,n=void 0;if(e.singleMaxWidth>=t)i=1,n=Math.max(t,e.minLineGap);else{var s=e.maxLineGap*~~i,o=e.minLineGap*~~(i+1),a=s>=t,r=o<=t;a&&r?(i=Math.round(i),n=t/i):a?n=t/(i=~~i):r?n=t/(i=~~(i+1)):(i=~~i,n=e.maxLineGap),1===i&&(n=Math.min(t,e.singleMaxWidth),n=Math.max(n,e.minLineGap))}return{width:M(n,i),count:i,left:G(t,n*i,e.align)}}(s,e),r=M(0,a.count);i.forEach(function(t,i){var s=r.reduce(function(t,e,i){return e<r[t]?i:t},0),o=a.width[s%a.count],c=n[i];c.top=r[s],c.left=a.left+(s?R(a.width.slice(0,s)):0),c.width=o,c.height=t.height*(e.fixedHeight?1:o/t.width),r[s]=r[s]+c.height}),t.style.height=Math.max.apply(Math,r)+"px"}}}(),O=function(){function t(t,i,n,s){var o=function(t,e,i,n){for(var s=0,o=n,a=0;o<i.length&&a<=t;o++)a+=i[o].width*e/i[o].height,s++;return s}(t,i.lineGap,n,s),a=Math.max(o-1,1),r=e(t,i,n,s,o),c=function(t,e,i){return t.cost===1/0&&e.cost===1/0?e.width<i?e:t:e.cost>=t.cost?t:e}(e(t,i,n,s,a),r,t),l=c.height,d=c.width;return 1===c.count&&(d=Math.min(i.singleMaxWidth,t),l=n[s].height*d/n[s].width),{left:G(t,d,i.align),count:c.count,height:l}}function e(t,e,i,n,s){for(var o=0,a=s-1;a>=0;a--){var r=i[n+a];o+=r.width*e.lineGap/r.height}var c=e.lineGap*t/o;if(c<=e.maxLineGap&&c>=e.minLineGap)return{cost:Math.abs(e.lineGap-c),count:s,width:t,height:c};var l=o>t?e.minLineGap:e.maxLineGap;return{cost:1/0,count:s,width:o*l/e.lineGap,height:l}}return{calculate:function(e,i,n,s){for(var o=e.$el.clientWidth,a=n.length,r=0,c=0;c<a;){for(var l,d,u=t(o,i,n,c),h=0,f=0;h<u.count;h++)l=n[c+h],(d=s[c+h]).top=r,d.left=u.left+f,d.width=l.width*u.height/l.height,d.height=u.height,f+=d.width;c+=u.count,r+=u.height}e.style.height=r+"px"}}}();function G(t,e,i){switch(i){case"right":return t-e;case"center":return(t-e)/2;default:return 0}}function R(t){return t.reduce(function(t,e){return t+e})}function B(t){return t.map(function(t){return t.vm.rect})}function H(){return void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend?"webkitTransitionEnd":"transitionend"}function M(t,e){for(var i="function"==typeof t?function(){return t()}:function(){return t},n=[],s=0;s<e;s++)n[s]=i();return n}function U(t,e,i){if(void 0===i)return t.getAttribute(e)||"";t.setAttribute(e,i)}function j(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];t.addEventListener(e,i,n)}function A(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];t.removeEventListener(e,i,n)}var W={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"vue-waterfall",style:this.style},[this._t("default")],2)},staticRenderFns:[]};var V=i("VU/8")(D,W,!1,function(t){i("merk")},null,null).exports,q={props:{items:{type:Array,default:function(){return[]}}},components:{Waterfall:V},mounted:function(){d()&&window.addEventListener("scroll",this.scrollHandler)},beforeDestroy:function(){d()&&window.addEventListener("scroll",this.scrollHandler)},data:function(){return{align:"center",isBusy:!1}},methods:{scrollHandler:function(){(document.documentElement.scrollTop||document.body.scrollTop)+window.innerHeight>=document.body.clientHeight&&this.addItems()},addItems:function(){this.isBusy||(this.isBusy=!0,this.$emit("loadmore"))},reflowed:function(){this.isBusy=!1,this.$emit("reflowed")}}},X={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("waterfall",{ref:"waterfall",attrs:{align:t.align,"line-gap":200,"min-line-gap":100,"max-line-gap":220,"single-max-width":300,watch:t.items},on:{reflowed:t.reflowed},nativeOn:{scroll:function(e){return t.scrollfall(e)}}},[t._t("default")],2)},staticRenderFns:[]};var J=i("VU/8")(q,X,!1,function(t){i("yRND")},"data-v-6e120c36",null).exports,Z=i("/kJX"),Q={props:["item","data"],components:{Carousel:Z.Carousel,Slide:Z.Slide},data:function(){return{zIndex:1,items:this.item}},mounted:function(){var t=this;setTimeout(function(){t.zIndex=2},300),setTimeout(function(){t.zIndex=3},500),setTimeout(function(){t.zIndex=4},1e3)}},K={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("carousel",{attrs:{mouseDrag:!1,autoplay:!0,loop:!0,perPage:1,autoplayTimeout:5e3,paginationEnabled:!1,adjustableHeight:!0}},t._l(t.items,function(e,n){return i("slide",{key:n,style:{zIndex:t.zIndex}},[i("img",{staticStyle:{width:"100%","border-radus":"5px"},attrs:{src:e.thumbUrl,alt:""}})])}),1)},staticRenderFns:[]},Y=i("VU/8")(Q,K,!1,null,null,null).exports,tt={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{directives:[{name:"show",rawName:"v-show",value:this.isShow,expression:"isShow"}],staticClass:"vue-waterfall-slot"},[this._t("default")],2)},staticRenderFns:[]};var et=i("VU/8")({data:function(){return{isShow:!1}},props:{width:{required:!0,validator:function(t){return t>=0}},height:{required:!0,validator:function(t){return t>=0}},order:{default:0},moveClass:{default:""}},methods:{notify:function(){this.$parent.$emit("reflow",this)},getMeta:function(){return{vm:this,node:this.$el,order:this.order,width:this.width,height:this.height,moveClass:this.moveClass}}},created:function(){var t=this;this.rect={top:0,left:0,width:0,height:0},this.$watch(function(){return t.width,t.height},this.notify)},mounted:function(){var t=this;this.$parent.$once("reflowed",function(){t.isShow=!0}),this.notify()},destroyed:function(){this.notify()}},tt,!1,function(t){i("2XCy")},null,null).exports,it={components:{WaterFall:J,WaterfallSlot:et,Carousel:Y},created:function(){x.dispatch("getProducts",{pId:-1})},computed:{items:function(){var t=x.state.productList.map(function(t){return g()({},t,{width:130,height:140})});return t},isEnd:function(){return x.state.isEnd},pageNo:function(){return x.state.pageNo}},data:function(){return{}},methods:{toDetail:function(t){t.id&&this.$router.push("/detail/"+t.id)},refresh:function(t){x.dispatch("getProducts",{pId:-1}).then(function(){t()}).catch(function(){t()})},loadmore:function(t){this.isEnd||x.dispatch("getProducts",{pageNo:this.pageNo+1,pId:-1}).then(function(){t()}).catch(function(){t()})}}},nt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("scroller",{attrs:{refreshText:"刷新中...","on-refresh":t.refresh,height:"95%"}},[i("WaterFall",{staticClass:"item-box",on:{loadmore:t.loadmore}},t._l(t.items,function(e,n){return i("waterfall-slot",{key:e.index,attrs:{width:e.width,height:e.height,order:n,"move-class":"item-move"}},[i("div",{staticClass:"item",on:{click:function(i){return t.toDetail(e)}}},[i("Carousel",{attrs:{item:e.mainImgList||[]}}),t._v(" "),i("div",{staticClass:"item-desc"},[i("div",{staticClass:"left"},[t._v("\n                        "+t._s(e.name)+"\n                    ")]),t._v(" "),i("div",{staticClass:"right"},[t._v("\n                        ... \n                    ")])])],1)])}),1)],1)},staticRenderFns:[]};var st=i("VU/8")(it,nt,!1,function(t){i("QJDA")},"data-v-32ab0e60",null).exports,ot={components:{WaterFall:J,WaterfallSlot:et},created:function(){x.dispatch("getProducts",{pId:-1})},computed:{items:function(){var t=x.state.productList.map(function(t){return g()({},t,{width:130,height:140})});return t},isEnd:function(){return x.state.isEnd},pageNo:function(){return x.state.pageNo}},data:function(){return{}},methods:{getCurrentHeight:function(t){},toLittleClass:function(t){this.$router.push("/"+t.id+"/littleClass")},reflowed:function(){},refresh:function(t){x.dispatch("getProducts",{pId:-1}).then(function(){t()}).catch(function(){t()})},loadmore:function(t){this.isEnd||x.dispatch("getProducts",{pageNo:this.pageNo+1,pId:-1}).then(function(){t()}).catch(function(){t()})},stateChange:function(t){"pull"===t||"trigger"===t?this.iconLink="#icon-arrow-bottom":"loading"===t?this.iconLink="#icon-loading":"loaded-done"===t&&(this.iconLink="#icon-finish")}}},at={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("scroller",{attrs:{refreshText:"刷新中...","on-refresh":t.refresh,height:"95%"}},[i("WaterFall",{staticClass:"box",on:{loadmore:t.loadmore,reflowed:t.reflowed}},t._l(t.items,function(e,n){return i("waterfall-slot",{key:e.index,staticClass:"slot-item",attrs:{width:e.width,height:e.height,order:n,"move-class":"item-move"}},[i("div",{staticClass:"item",on:{click:function(i){return t.toLittleClass(e)}}},[i("div",{staticClass:"title"},[t._v(t._s(e.name))]),t._v(" "),i("div",{staticClass:"img-box"},[i("div",{staticClass:"left"},[i("img",{ref:e.id,refInFor:!0,staticStyle:{width:"100%"},attrs:{src:e.mainImgList[0].thumbUrl,alt:""},on:{load:function(i){return t.getCurrentHeight(e)}}})]),t._v(" "),i("div",{staticClass:"right"},[i("img",{ref:e.id,refInFor:!0,staticStyle:{width:"100%"},attrs:{src:(e.mainImgList[1]||{}).thumbUrl,alt:""}}),t._v(" "),i("img",{ref:e.id,refInFor:!0,staticStyle:{width:"100%"},attrs:{src:(e.mainImgList[2]||{}).thumbUrl,alt:""}})])])])])}),1)],1)},staticRenderFns:[]};var rt=i("VU/8")(ot,at,!1,function(t){i("0Jey")},"data-v-bee370f8",null).exports,ct=["#252B18","#4A3901","#40481F","#8B7450","#647C02"],lt={props:{list:{type:Array,default:function(){return[]}}},data:function(){return{sliderList:this.handlerList(this.list)}},watch:{list:function(t){this.sliderList=this.handlerList(this.list)}},methods:{handlerList:function(t){return[{id:0,name:"全部",color:ct[0],isActive:!0}].concat(t.map(function(t,e){return g()({},t,{color:ct[e]||ct[e%ct.length],isActive:!1})}))},chooseItem:function(t,e){e.forEach(function(e){e.isActive=e.id===t.id}),this.$emit("chooseItem",t)}}},dt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"slider-container"},[i("ul",{staticClass:"slider-box"},t._l(t.sliderList,function(e,n){return i("li",{key:n,staticClass:"slider-item",class:{active:e.isActive},style:{backgroundColor:e.color},on:{click:function(i){return t.chooseItem(e,t.sliderList)}}},[t._v(t._s(e.name))])}),0)])},staticRenderFns:[]};var ut={components:{WaterFall:J,WaterfallSlot:et,Slider:i("VU/8")(lt,dt,!1,function(t){i("25hb")},"data-v-621cb6d8",null).exports},data:function(){return{id:this.$route.params.id,itemWidth:0}},computed:{navList:function(){var t=x.state.productInfo||{};return console.log("info",t),t.children},list:function(){return x.state.productImgList},isEnd:function(){return x.state.isEnd},pageNo:function(){return x.state.pageNo},pageSize:function(){return x.state.pageSize},items:function(){return this.handlerList(this.list)}},created:function(){x.dispatch("getProduct",{id:this.id})},methods:{toDetail:function(t){t.id&&this.$router.push("/detail/"+t.id)},handlerList:function(t){var e=[];return t.forEach(function(t){e=e.concat(t.mainImgList.map(function(e){return g()({},t,e,{width:130,height:140,name:t.name})}))}),e.slice((this.pageNo-1)*this.pageSize)},chooseItem:function(t){"全部"!==t.name?(x.commit("setPageNo",1),x.commit("setProductImgList",[t])):x.dispatch("getProduct",{id:this.id})},getCurrentHeight:function(t){t.mainImgList=t.mainImgList||[{}],u((t.mainImgList[0]||{}).url,t.width).then(function(e){t.height=e})},reflowed:function(){},refresh:function(t){setTimeout(function(){t()},2500)},loadmore:function(t){t()}}},ht={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[i("Slider",{attrs:{list:t.navList},on:{chooseItem:t.chooseItem}}),t._v(" "),i("scroller",{staticClass:"scrollerbox",attrs:{refreshText:"刷新中...","on-refresh":t.refresh,height:"95%","on-infinite":t.loadmore}},[i("WaterFall",{staticClass:"item-box",on:{loadmore:t.loadmore,reflowed:t.reflowed}},t._l(t.items,function(e,n){return i("waterfall-slot",{key:e.index,staticClass:"slot-item",attrs:{width:e.width,height:e.height,order:n,"move-class":"item-move"}},[i("div",{staticClass:"item",on:{click:function(i){return t.toDetail(e)}}},[i("img",{ref:e.id,refInFor:!0,staticStyle:{width:"100%"},attrs:{src:e.url,alt:""},on:{load:function(i){return t.getCurrentHeight(e)}}}),t._v(" "),i("div",{staticClass:"item-desc"},[i("div",{staticClass:"left"},[t._v("\n                            "+t._s(e.name)+"\n                        ")]),t._v(" "),i("div",{staticClass:"right"},[t._v("\n                            ... \n                        ")])])])])}),1)],1)],1)},staticRenderFns:[]};var ft=i("VU/8")(ut,ht,!1,function(t){i("v/Vh")},"data-v-3c20e7a4",null).exports,mt={components:{WaterFall:J,WaterfallSlot:et},data:function(){return{}},computed:{items:function(){var t=x.state.productList.map(function(t){return g()({},t,{width:130,height:140})});return t},isEnd:function(){return x.state.isEnd},pageNo:function(){return x.state.pageNo}},created:function(){x.dispatch("getProducts",{pId:-100})},methods:{toDetail:function(t){t.id&&this.$router.push("/detail/"+t.id)},getCurrentHeight:function(t){u((t.mainImgList[0]||{}).url,t.width).then(function(e){t.height=e})},reflowed:function(){},refresh:function(t){setTimeout(function(){t()},1500)},loadmore:function(t){t(),"function"!=typeof t&&(t=function(){})}}},pt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("scroller",{attrs:{refreshText:"刷新中...","on-refresh":t.refresh,height:"95%","on-infinite":t.loadmore}},[i("WaterFall",{staticClass:"item-box",on:{loadmore:t.loadmore,reflowed:t.reflowed}},t._l(t.items,function(e,n){return i("waterfall-slot",{key:e.index,staticClass:"slot-item",attrs:{width:e.width,height:e.height,order:n,"move-class":"item-move"}},[i("div",{staticClass:"item",on:{click:function(i){return t.toDetail(e)}}},[i("img",{ref:e.id,refInFor:!0,staticStyle:{width:"100%"},attrs:{src:e.mainImgList[0].url,alt:""},on:{load:function(i){return t.getCurrentHeight(e)}}}),t._v(" "),i("div",{staticClass:"item-desc"},[i("div",{staticClass:"left"},[t._v("\n                        "+t._s(e.name)+"\n                    ")]),t._v(" "),i("div",{staticClass:"right"},[t._v("\n                        ... \n                    ")])])])])}),1)],1)},staticRenderFns:[]};var vt=i("VU/8")(mt,pt,!1,function(t){i("sBmI")},"data-v-acac2120",null).exports;var gt={components:{},data:function(){return{}},computed:{items:function(){var t=x.state.productList.map(function(t){return g()({},t,{width:130,height:140})});return t},isEnd:function(){return x.state.isEnd},pageNo:function(){return x.state.pageNo}},created:function(){x.dispatch("getProducts",{pId:-100})},filters:{getGapDay:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date;if(!t||!e)throw new Error("请传入有效日期");var i=new Date(t).setHours(0,0,0,0),n=new Date(e).setHours(0,0,0,0),s=parseInt((i-n)/864e5);if(0===s){var o=parseInt((new Date(t).getTime()-new Date(e).getTime())/36e5);return o>0?o+"小时后":0===o?"刚刚":-o+"小时前"}return s>0?s+"天后":-s+"天前"}},methods:{toDetail:function(t){t.id&&this.$router.push("/detail/"+t.id)},refresh:function(t){setTimeout(function(){t()},1500)},loadmore:function(t){t()}}},wt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("scroller",{attrs:{refreshText:"刷新中...","on-refresh":t.refresh,height:"95%","on-infinite":t.loadmore}},[i("div",{staticClass:"notice-box"},t._l(t.items,function(e,n){return i("div",{key:n,staticClass:"item",on:{click:function(i){return t.toDetail(e)}}},[i("div",{staticClass:"title"},[i("div",{staticClass:"icon iconfont",class:e.icon}),t._v(" "),i("div",{staticClass:"text"},[t._v(t._s(e.name))]),t._v(" "),i("div",{staticClass:"date"},[t._v(t._s(t._f("getGapDay")(e.modifyDate)))])]),t._v(" "),i("div",{staticClass:"content"},[i("img",{ref:e.id,refInFor:!0,staticStyle:{width:"100%","max-width":"600px"},attrs:{src:e.mainImgList[0].url,alt:""}})])])}),0)])},staticRenderFns:[]};var Ct=i("VU/8")(gt,wt,!1,function(t){i("HnxF")},"data-v-3fc1b5ba",null).exports,_t={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"user-info"},[i("div",{staticClass:"name-box"},[i("div",{staticClass:"user-name"},[t._v(t._s(t.user.name))]),t._v(" "),i("div",{staticClass:"user-icon"},[i("img",{staticClass:"width-100",attrs:{src:t.user.icon,alt:""}})])]),t._v(" "),i("div",{staticClass:"content"},[i("div",{staticClass:"item"},[i("div",{staticClass:"left"},[t._v("积分："+t._s(t.user.score))]),t._v(" "),t._m(0)]),t._v(" "),i("div",{staticClass:"item"},[i("div",{staticClass:"left"},[t._v("我的推广码")]),t._v(" "),i("div",{staticClass:"right"},[i("span",{staticClass:"qrcode"},[i("img",{staticClass:"width-100",attrs:{src:t.user.qrImg,alt:""}})])])]),t._v(" "),t._m(1)]),t._v(" "),i("div",{staticClass:"footer"},[i("div",{staticClass:"upgrade-box"},[i("button",{staticClass:"upgrade"},[t._v("立即升级VIP "+t._s(t.user.vipFee)+"元/年")])]),t._v(" "),i("div",{staticClass:"buy-box"},[i("button",{staticClass:"buy"},[t._v("单次购买"+t._s(t.user.singFee)+"元")])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"right"},[e("span",{staticClass:"vip"},[this._v("vip")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"item"},[e("div",{staticClass:"left"},[this._v("设计师端口")]),this._v(" "),e("div",{staticClass:"right"},[e("span",{staticClass:"apply"},[this._v("申请")])])])}]};var It=i("VU/8")({data:function(){return{user:{name:"毛瑞彬",icon:"static/test/1.jpg",qrImg:"static/test/2.jpg",score:100,vipFee:99,singFee:9}}}},_t,!1,function(t){i("36oo")},"data-v-7f0d1540",null).exports,yt={props:{url:{type:String,default:""},needClose:{type:Boolean,default:!0}},methods:{close:function(){this.$emit("close")}}},bt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"img-diolog"},[this.needClose?e("div",{staticClass:"close",on:{click:this.close}},[this._v("X")]):this._e(),this._v(" "),e("img",{staticClass:"w-100",attrs:{src:this.url,alt:""}})])},staticRenderFns:[]};var xt={components:{ImgDialog:i("VU/8")(yt,bt,!1,function(t){i("KQ2A")},"data-v-562f6ea7",null).exports},data:function(){return{id:this.$route.params.id,url:"/static/test/2.jpg",show3d:!1}},created:function(){x.dispatch("getProduct",{id:this.id})},computed:{productInfo:function(){return x.state.productInfo||{}}}},kt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"detail-box"},[i("div",{staticClass:"detail-img"},[i("img",{staticClass:"w-100",attrs:{src:t.productInfo.descImg,alt:""}})]),t._v(" "),i("div",{staticClass:"detail-btns"},[i("div",{staticClass:"btn left",on:{click:function(e){t.show3d=!0}}},[t._v("\n            产品3维展示\n        ")]),t._v(" "),i("div",{staticClass:"btn right"},[t._v("\n            购买方案原型\n        ")])]),t._v(" "),t.show3d?i("ImgDialog",{attrs:{url:t.productInfo.gifImg},on:{close:function(e){t.show3d=!1}}}):t._e()],1)},staticRenderFns:[]};var Lt=i("VU/8")(xt,kt,!1,function(t){i("bhuy")},"data-v-7f200260",null).exports;o.a.use(w.a);var Et=new w.a.Store({state:{productList:[],productInfo:{},editDiologShow:!1,isEdit:!1,editInfo:{name:"",mainImgList:[],descImgThumb:"",descImg:"",gifImg:"",originFile:"",prize:0}},mutations:{setEditing:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.isEdit=e},setProductList:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];t.productList=e},setProductInfo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.productInfo=e},setEditInfo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.editInfo=e},setEditDiologShow:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.editDiologShow=e}},actions:{deleteProduct:function(t,e){t.commit;var i=t.dispatch;return C(_.delete,e).then(function(t){i("getProducts"),h("删除产品成功")}).catch(function(t){h(t.msg||t.body.msg)})},addProduct:function(t,e){t.commit;var i=t.dispatch;return C(_.add,e).then(function(t){i("getProducts"),h("新增产品成功")}).catch(function(t){h(t.msg||t.body.msg)})},editProduct:function(t,e){t.commit;var i=t.dispatch;return C(_.edit,e).then(function(t){i("getProducts"),h("修改产品成功")}).catch(function(t){h(t.msg||t.body.msg)})},getProducts:function(t,e){var i=t.commit;t.dispatch;return C(_.getAll,e).then(function(t){var e=t.data;i("setProductList",e.products)}).catch(function(t){h(t.msg||t.body.msg)})},getProduct:function(t,e){var i=t.commit;t.dispatch;return C(_.get,e).then(function(t){var e=t.data;i("setProductInfo",e)}).catch(function(t){h(t.msg||t.body.msg)})}}}),Pt=0;var St={name:"ShnModal",props:{visible:{type:Boolean,default:!1},title:{type:String,default:""},mask:{type:Boolean,default:!0},maskClosable:{type:Boolean,default:!0},styleObj:{type:Object,default:function(){return{}}}},data:function(){return{id:0,show:this.visible}},watch:{visible:function(t){this.show=t,this.show?(Pt=document.scrollingElement.scrollTop,document.body.style.position="fixed",document.body.style.top=-Pt+"px"):(document.body.style.position="",document.body.style.top="",document.scrollingElement.scrollTop=Pt)}},mounted:function(){},methods:{close:function(){this.$emit("close")}}},$t={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"shn-modal"},[i("transition",{attrs:{name:"shn-fade"}},[t.show&&t.mask?i("div",{staticClass:"shn-modal-mask",on:{click:function(e){t.maskClosable&&t.$emit("update:visible",!1),t.close()}}}):t._e()]),t._v(" "),i("transition",{attrs:{name:"shn-modal-fade"}},[t.show?i("div",{staticClass:"shn-modal-content"},[i("div",{staticClass:"shn-modal-content-box",style:t.styleObj},[i("div",{staticClass:"shn-modal-content-close",on:{click:function(e){return t.close()}}},[i("span",{staticClass:"shn-modal-close-x"},[t._v("\n                  X\n                ")])]),t._v(" "),t.title?i("div",{staticClass:"shn-modal-content-header"},[i("div",[t._v(t._s(t.title))])]):t._e(),t._v(" "),i("div",{staticClass:"shn-modal-content-body"},[t._t("body")],2),t._v(" "),i("div",{staticClass:"shn-modal-content-footer"},[t._t("footer")],2)])]):t._e()])],1)},staticRenderFns:[]};var Ft=i("VU/8")(St,$t,!1,function(t){i("jz0f")},"data-v-48c81ae9",null).exports,Dt=i("YZ0n"),zt={props:{title:{type:String,default:"确定删除吗"},show:{type:Boolean,default:!0},content:{type:String,default:""}},components:{modal:Ft},methods:{close:function(){this.$emit("close")},sure:function(){this.$emit("ok")}}},Tt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("modal",{attrs:{visible:t.show,title:t.title,"mask-closable":!1},on:{"update:visible":function(e){t.show=e},close:function(e){return t.close()}},scopedSlots:t._u([{key:"body",fn:function(){return[i("div",{staticStyle:{width:"300px",display:"flex"}},[t._v("\n             "+t._s(t.content)+"\n           ")])]},proxy:!0},{key:"footer",fn:function(){return[i("button",{staticClass:"btn",on:{click:t.close}},[t._v("取消")]),t._v(" "),i("button",{staticClass:"btn success",on:{click:t.sure}},[t._v("确定")])]},proxy:!0}])})},staticRenderFns:[]},Nt=i("VU/8")(zt,Tt,!1,null,null,null).exports,Ot={components:{VueCropper:Dt.VueCropper,Confirm:Nt,modal:Ft},props:{styleObj:{type:Object,default:function(){return{}}},id:{type:Number,default:-1},url:{type:Object,default:function(){return I.upload}},img:{default:""},addIcon:{type:String,default:"/static/icon/add.png"},tip:{type:String,default:""},cropper:{type:Boolean,default:!0},fixed:{type:Boolean,default:!0},isImg:{type:Boolean,default:!0},fixedNumber:{type:Array,default:function(){return[1,1]}}},data:function(){return{confirmContent:"确定要删除此张图片吗？",showConfirm:!1,host:"http://localhost:3433",originPath:this.isImg?"/api/download/image/origin/":"/api/download/file/origin/",thumbPath:this.isImg?"/api/download/image/thumbnail/":"",isMaskShow:!1,showBigImg:!1,cropperImg:this.img||"",bgImg:this.img||"",cropperShow:!1,outputSize:.8,width:400,height:300,cropperInfo:{width:"100%",heigth:"100%"},previewImg:""}},watch:{img:function(t){this.cropperImg=t,this.bgImg=t}},computed:{showImgMask:function(){return this.isMaskShow&&this.img}},methods:{sure:function(){this.deleteImg()},emitChange:function(t,e){var i=this;if("fileChange"===t){var n=new FormData;n.append("file",e.blob,"a.jpg"),this.$ajax(this.url,n).then(function(e){i.$emit(t,s()(e,{url:i.host+i.originPath+e.filename,thumbUrl:i.host+i.thumbPath+e.filename}))})}else this.$emit(t,e)},preview:function(t){this.showBigImg=!0},deleteImg:function(t){this.emitChange("deleteImg",{img:this.bgImg,id:this.id})},chooseFile:function(){this.$refs.input.click(),this.hideMask()},showMask:function(){this.img&&(this.isMaskShow=!0)},hideMask:function(){this.img&&(this.isMaskShow=!1)},fileChange:function(t){var e=this,i=(t.target||{}).files;if(i){var n=i[0],s=new FileReader;s.onload=function(t){e.cropperImg=t.target.result,e.cropper?e.cropperShow=!0:(e.bgImg=t.target.result,e.emitChange("fileChange",{base64:e.cropperImg,blob:n})),e.$refs.input.value=""},s.onerror=function(t){e.emitChange("fileChange",{base64:"",blob:n})},s.readAsDataURL(n)}},hideCropper:function(){this.hideMask(),this.cropperShow=!1},getBlob:function(){var t=this;return new l.a(function(e,i){t.$refs.cropper.getCropBlob(function(t){e(t)})})},getBase64:function(){var t=this;return new l.a(function(e,i){t.$refs.cropper.getCropData(function(t){e(t)})})},cropperConfirm:function(){var t=this;this.hideMask(),this.bgImg=this.previewImg,this.cropperShow=!1;var e=[this.getBlob(),this.getBase64()];l.a.all(e).then(function(e){t.emitChange("fileChange",{id:t.id,base64:e[1],blob:e[0]})})},realTime:function(t){var e=this;this.getBase64().then(function(t){e.previewImg=t})}}},Gt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{width:"100%",height:"100%"}},[i("div",{staticClass:"item-container",style:Object.assign({},{backgroundImage:"url("+t.img+")"},t.styleObj)},[i("input",{ref:"input",staticClass:"file",attrs:{type:"file"},on:{mouseenter:function(e){return t.showMask()},change:function(e){return t.fileChange(e)}}}),t._v(" "),t.img?t._e():i("div",{staticClass:"tip"},[i("img",{attrs:{src:t.addIcon,alt:""}}),t._v(" "),i("span",[t._v(t._s(t.tip))])]),t._v(" "),t.showImgMask?i("div",{staticClass:"img-mask",on:{mouseleave:function(e){return t.hideMask()},click:function(e){return t.chooseFile()}}},[i("i",{attrs:{title:"预览"},on:{click:function(e){return e.stopPropagation(),t.preview(e)}}},[i("img",{staticClass:"icon",attrs:{src:"/static/icon/preview.png",alt:""}})]),t._v(" "),i("i",{attrs:{title:"删除"},on:{click:function(e){e.stopPropagation(),t.showConfirm=!0}}},[i("img",{staticClass:"icon",attrs:{src:"/static/icon/delete.png",alt:""}})])]):t._e()]),t._v(" "),i("modal",{staticClass:"showBigImg",attrs:{visible:t.showBigImg},on:{"update:visible":function(e){t.showBigImg=e},close:function(e){t.showBigImg=!1}},scopedSlots:t._u([{key:"body",fn:function(){return[i("div",{staticStyle:{width:"500px",height:"400px",display:"flex"}},[i("img",{staticStyle:{width:"100%"},attrs:{src:t.bgImg,alt:""}})])]},proxy:!0}])}),t._v(" "),i("modal",{attrs:{"mask-closable":!1,visible:t.cropperShow,title:"裁剪图片"},on:{"update:visible":function(e){t.cropperShow=e}},scopedSlots:t._u([{key:"body",fn:function(){return[i("div",{staticStyle:{width:"500px",height:"400px",display:"flex"}},[i("div",{staticClass:"preview"},[i("img",{staticStyle:{width:"100%"},attrs:{src:t.previewImg}})]),t._v(" "),i("vue-cropper",{ref:"cropper",staticClass:"cropper",attrs:{autoCropHeight:"100%","fixed-number":[t.width,t.height],full:!0,img:t.cropperImg,centerBox:!0,"output-size":t.outputSize,"auto-crop":!0,fixed:t.fixed,fixedNumber:t.fixedNumber},on:{realTime:t.realTime}})],1)]},proxy:!0},{key:"footer",fn:function(){return[i("button",{staticClass:"btn",on:{click:t.hideCropper}},[i("span",[t._v("取消")])]),t._v(" "),i("button",{staticClass:"btn success",on:{click:t.cropperConfirm}},[i("span",[t._v("确定")])])]},proxy:!0}])}),t._v(" "),i("Confirm",{attrs:{show:t.showConfirm,content:t.confirmContent},on:{close:function(e){t.showConfirm=!1},ok:t.sure}})],1)},staticRenderFns:[]};var Rt=i("VU/8")(Ot,Gt,!1,function(t){i("57ZT")},"data-v-0861a692",null).exports,Bt={components:{cropperItem:Rt},props:{styleObj:{type:Object,default:function(){return{}}},itemStyleObj:{type:Object,default:function(){return{}}},imgInfoList:{type:Array,default:function(){return[]}}},data:function(){return{identId:0,newImg:"",items:this.imgInfoList}},methods:{addImg:function(t){this.identId++,t.identId=this.identId,this.items.push(t),this.newImg="",this.$emit("fileChange",this.items)},changeImg:function(t){var e=this.items.findIndex(function(e){return e.identId===t.id});this.items[e]=s()(this.items[e],t)},deleteImg:function(t){var e=this.items.findIndex(function(e){return e.identId===t.id});this.items.splice(e,1)}}},Ht={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ul",{style:t.styleObj},[t._l(t.items,function(e,n){return i("li",{key:n,staticClass:"change item",style:t.itemStyleObj},[i("cropperItem",{attrs:{id:e.identId,img:e.url,index:n},on:{fileChange:t.changeImg,deleteImg:t.deleteImg}})],1)}),t._v(" "),i("li",{staticClass:"add item",style:t.itemStyleObj},[i("cropperItem",{attrs:{img:t.newImg},on:{fileChange:t.addImg}})],1)],2)},staticRenderFns:[]};var Mt=i("VU/8")(Bt,Ht,!1,function(t){i("vT8a")},"data-v-57d06fe0",null).exports,Ut={props:{pId:{type:Number,default:-1}},computed:{editDiologShow:{get:function(){return Et.state.editDiologShow},set:function(t){Et.commit("setEditDiologShow",t)}},isEdit:function(){return Et.state.isEdit},editInfo:{get:function(){return Et.state.editInfo},set:function(t){Et.commit("setEditInfo",t)}}},methods:{updateMainImgList:function(t){this.editInfo.mainImgList=t},updateDesc:function(t){this.editInfo.descImgThumb=t.thumbUrl,this.editInfo.descImg=t.url},updateGif:function(t){this.editInfo.gifImgThumb=t.thumbUrl,this.editInfo.gifImg=t.url},updateFile:function(t){this.editInfo.originFile=t.url},checkEditInfo:function(){var t=!0,e=!1,i=void 0;try{for(var n,s=r()([{key:"name",type:"string",value:"产品名称不能为空"},{key:"mainImgList",type:"array",value:"产品主图不能为空"},{key:"descImg",type:"string",value:"产品详情不能为空"},{key:"gifImg",type:"string",value:"产品动图不能为空"},{key:"originFile",type:"string",value:"产品原型不能为空"}]);!(t=(n=s.next()).done);t=!0){var o=n.value;if("string"===o.type&&!this.editInfo[o.key])return o.value;if("array"===o.type&&this.editInfo[o.key].length<1)return o.value}}catch(t){e=!0,i=t}finally{try{!t&&s.return&&s.return()}finally{if(e)throw i}}return""},save:function(){var t=this,e=this.checkEditInfo();if(e)return h(e);void 0===this.editInfo.pId&&(this.editInfo.pId=this.pId),this.editInfo.prize=+this.editInfo.prize,Et.dispatch(this.isEdit?"editProduct":"addProduct",this.editInfo).then(function(){t.editDiologShow=!1})}},components:{modal:Ft,CroppperList:Mt,CropperItem:Rt},data:function(){return{descImg:"",uploadUrl:I.upload,dialogShow:this.show,isUpload:!1,styleObj:{backgroundColor:"#EBEBEB"},itemStyleObj:{width:"60px",height:"60px",backgroundColor:"#fff",borderRadius:"7px",overflow:"hidden"},uploadStyleObj:{backgroundColor:"#EBEBEB",color:"#000"}}}},jt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("modal",{attrs:{visible:t.editDiologShow,styleObj:t.styleObj,title:t.isEdit?"编辑":"新增"},on:{"update:visible":function(e){t.editDiologShow=e},close:function(e){t.editDiologShow=!1}},scopedSlots:t._u([{key:"body",fn:function(){return[i("div",{staticClass:"form-container"},[i("div",{staticClass:"form"},[i("div",{staticClass:"item name"},[i("div",{staticClass:"left"},[t._v("产品名称")]),t._v(" "),i("div",{staticClass:"right"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.editInfo.name,expression:"editInfo.name"}],attrs:{type:"text",placeholder:"请输入产品名称"},domProps:{value:t.editInfo.name},on:{input:function(e){e.target.composing||t.$set(t.editInfo,"name",e.target.value)}}})])]),t._v(" "),i("div",{staticClass:"item main"},[i("div",{staticClass:"left"},[t._v("产品主图")]),t._v(" "),i("div",{staticClass:"right"},[i("CroppperList",{attrs:{imgInfoList:t.editInfo.mainImgList,itemStyleObj:t.itemStyleObj},on:{fileChange:t.updateMainImgList}})],1)]),t._v(" "),i("div",{staticClass:"item desc"},[i("div",{staticClass:"left"},[t._v("产品详情")]),t._v(" "),i("div",{staticClass:"right"},[i("CropperItem",{attrs:{img:t.editInfo.descImg,cropper:!1,url:t.uploadUrl},on:{fileChange:t.updateDesc}})],1)]),t._v(" "),i("div",{staticClass:"item gif"},[i("div",{staticClass:"left"},[t._v("产品动图")]),t._v(" "),i("div",{staticClass:"right"},[i("CropperItem",{attrs:{cropper:!1,img:t.editInfo.gifImg},on:{fileChange:t.updateGif}})],1)]),t._v(" "),i("div",{staticClass:"item file"},[i("div",{staticClass:"left"},[t._v("产品原文件")]),t._v(" "),i("div",{staticClass:"right"},[i("div",{staticClass:"upload"},[i("button",{staticClass:"btn file"},[i("CropperItem",{attrs:{cropper:!1,styleObj:t.uploadStyleObj,addIcon:"",tip:"点击上传",isImg:!1},on:{fileChange:t.updateFile}})],1),t._v(" "),i("span",{class:{active:t.editInfo.originFile}},[t._v("已上传")]),t._v("/\n                              "),i("span",{class:{active:!t.editInfo.originFile}},[t._v("未上传")])]),t._v(" "),i("div",{staticClass:"prize"},[i("span",[t._v("原文件价格")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.editInfo.prize,expression:"editInfo.prize"}],staticClass:"btn danger",domProps:{value:t.editInfo.prize},on:{input:function(e){e.target.composing||t.$set(t.editInfo,"prize",e.target.value)}}}),t._v(" 元\n                            ")])])]),t._v(" "),i("div",{staticClass:"item",on:{click:function(e){return t.save()}}},[i("button",{staticClass:"btn danger save"},[t._v("完成保存")])])])])]},proxy:!0}])})},staticRenderFns:[]};var At=i("VU/8")(Ut,jt,!1,function(t){i("imBz")},"data-v-007d8388",null).exports,Wt={components:{ProductEdit:At},data:function(){return{activeId:-2,pId:-1,showDialog:!1,height:window.screen.availHeight-15}},computed:{list:function(){return Et.state.productList}},created:function(){Et.dispatch("getProducts")},mounted:function(){},methods:{addProduct:function(t){if(t){this.pId=t;Et.commit("setEditing",!1),Et.commit("setEditInfo",{name:"",mainImgList:[],descImgThumb:"",descImg:"",gifImg:"",originFile:"",prize:0}),Et.commit("setEditDiologShow",!0)}},showDesc:function(t){this.activeId=t,this.$router.push("/admin/"+t)}}},Vt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"admin-container",style:{height:t.height+"px"}},[i("div",{staticClass:"admin-nav"},[t._m(0),t._v(" "),i("div",{staticClass:"content"},[i("ul",t._l(t.list,function(e,n){return i("li",{key:n,staticClass:"big-class",on:{click:function(i){return t.showDesc(e.id)}}},[i("div",{staticClass:"title-box",class:{active:e.id===t.activeId}},[i("div",{staticClass:"left",attrs:{title:e.name}},[t._v("\n                            "+t._s(t._f("ellipsis")(e.name,6))+"\n                        ")]),t._v(" "),i("div",{staticClass:"right"},[i("div",{staticClass:"operation",on:{click:function(i){return i.stopPropagation(),t.addProduct(e.id)}}},[t._v("添加")]),t._v(" "),i("div",{staticClass:"operation"},[t._v("移动")]),t._v(" "),i("div",{staticClass:"operation"},[t._v("重命名")])])]),t._v(" "),i("ul",t._l(e.children,function(e,n){return i("li",{key:n,staticClass:"little-class",class:{active:e.id===t.activeId},on:{click:function(i){return i.stopPropagation(),t.showDesc(e.id)}}},[i("div",{staticClass:"title-box"},[i("div",{staticClass:"left",attrs:{title:e.name}},[t._v("\n                                      "+t._s(t._f("ellipsis")(e.name,5))+"\n                                ")]),t._v(" "),t._m(1,!0)])])}),0)])}),0)]),t._v(" "),i("div",{staticClass:"footer",on:{click:function(e){return t.addProduct(-1)}}},[i("div",{staticClass:"text"},[t._v("添加产品")])])]),t._v(" "),i("div",{staticClass:"admin-child"},[i("router-view")],1),t._v(" "),i("ProductEdit",{attrs:{pId:t.pId}})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("div",{staticClass:"text"},[this._v("产品管理")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"right"},[e("div",{staticClass:"operation"},[this._v("主图")]),this._v(" "),e("div",{staticClass:"operation"},[this._v("移动")]),this._v(" "),e("div",{staticClass:"operation"},[this._v("重命名")])])}]};var qt=i("VU/8")(Wt,Vt,!1,function(t){i("oO5X")},"data-v-4ad82c6a",null).exports,Xt={components:{ProductEdit:At,Confirm:Nt},created:function(){Et.dispatch("getProduct",{id:this.id})},computed:{productInfo:function(){return Et.state.productInfo||{}},id:function(){return+this.$route.params.id}},watch:{id:function(t){Et.dispatch("getProduct",{id:this.id})}},data:function(){return{showConfirm:!1,title:"提示",confirmContent:""}},methods:{sure:function(){var t=this;Et.dispatch("deleteProduct",{id:this.id}).then(function(){t.showConfirm=!1})},move:function(){},deleteProduct:function(){this.showConfirm=!0,this.confirmContent="确定删除 "+this.productInfo.name+" 吗？"},showDialog:function(){Et.commit("setEditing",!0),Et.commit("setEditInfo",this.productInfo),Et.commit("setEditDiologShow",!0)}}},Jt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ul",[t._l(t.productInfo.mainImgList||[],function(e,n){return i("li",{key:n,staticClass:"item",on:{click:function(e){return t.showDialog()}}},[i("img",{attrs:{src:e.url,alt:""}}),t._v(" "),i("div",{staticClass:"desc"},[i("div",{staticClass:"left"},[t._v(t._s(t.productInfo.name))]),t._v(" "),i("div",{staticClass:"right"},[i("div",{staticClass:"move",on:{click:function(e){return e.stopPropagation(),t.move(e)}}},[t._v("移动")]),t._v(" "),i("div",{staticClass:"delete",on:{click:function(e){return e.stopPropagation(),t.deleteProduct(e)}}},[t._v("删除")])])])])}),t._v(" "),i("ProductEdit",{attrs:{show:t.showDialog,pId:t.productInfo.pId}}),t._v(" "),i("Confirm",{attrs:{show:t.showConfirm,title:t.title,content:t.confirmContent},on:{close:function(e){t.showConfirm=!1},ok:t.sure}})],2)},staticRenderFns:[]};var Zt=i("VU/8")(Xt,Jt,!1,function(t){i("usyi")},"data-v-211c40dc",null).exports,Qt=$.a.prototype.push;$.a.prototype.push=function(t){return Qt.call(this,t).catch(function(t){return t})},o.a.use($.a);var Kt=new $.a({routes:[{path:"/",name:"home",component:st},{path:"/classify",name:"classify",component:rt},{path:"/collect",name:"collect",component:vt},{path:"/notice",name:"notice",component:Ct},{path:"/user",name:"user",component:It},{path:"/:id/littleClass",name:"littleClass",component:ft},{path:"/detail/:id",name:"detail",component:Lt},{path:"/admin",name:"admin",component:qt,children:[{path:"/admin/:id",name:"product",component:Zt}]}]}),Yt=i("8+8L"),te=i("POcy"),ee=i.n(te);o.a.prototype.$ajax=C;var ie=[{ellipsis:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return t.length>e?t.slice(0,e-1)+"...":t}}],ne=!0,se=!1,oe=void 0;try{for(var ae,re=r()(ie);!(ne=(ae=re.next()).done);ne=!0){var ce=ae.value;for(var le in ce){if("function"!=typeof ce[le])break;o.a.filter(le,ce[le])}}}catch(t){se=!0,oe=t}finally{try{!ne&&re.return&&re.return()}finally{if(se)throw oe}}o.a.config.productionTip=!1,o.a.use(Yt.a),o.a.http.options.emulateHTTP=!1,o.a.http.interceptors.push(function(t,e){window.localStorage.getItem("token")&&t.headers.set("authorization","Bearer "+window.localStorage.getItem("token")),e(function(t){return 401===t.status&&(Et.commit("unset_user"),Kt.go({name:"login"})),200===t.status?s()({},t.body,{ok:!0}):t})}),d()?o.a.component("scroller",{template:"<div><slot></slot></div>"}):o.a.use(ee.a),o.a.config.productionTip=!1,new o.a({el:"#app",router:Kt,components:{App:S},template:"<App/>"})},QJDA:function(t,e){},bZhl:function(t,e){},bhuy:function(t,e){},imBz:function(t,e){},jz0f:function(t,e){},merk:function(t,e){},oO5X:function(t,e){},sBmI:function(t,e){},usyi:function(t,e){},"v/Vh":function(t,e){},vT8a:function(t,e){},xFEl:function(t,e){},yRND:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.3df92e29c5b00ed27807.js.map